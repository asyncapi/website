<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="description" content="In this tutorial, you get started with actual code and a (could-be) real-world use case. &amp;lt!--more--&amp;gt
Let&amp;amp#39;s pretend you have a company called Smarty Lighting and you do smart-city lighting s"/><link rel="alternate" type="application/rss+xml" title="RSS Feed for AsyncAPI Initiative Blog" href="/rss.xml"/><link rel="icon" href="/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="194x194" href="/favicon-194x194.png"/><meta itemProp="name" content="Streetlights | AsyncAPI Initiative for event-driven APIs"/><meta itemProp="description" content="In this tutorial, you get started with actual code and a (could-be) real-world use case. &amp;lt!--more--&amp;gt
Let&amp;amp#39;s pretend you have a company called Smarty Lighting and you do smart-city lighting s"/><meta itemProp="image" content="http://localhost:8080/img/social/card.png"/><meta name="twitter:card" value="summary_large_image"/><meta name="twitter:title" content="Streetlights | AsyncAPI Initiative for event-driven APIs"/><meta name="twitter:description" content="In this tutorial, you get started with actual code and a (could-be) real-world use case. &amp;lt!--more--&amp;gt
Let&amp;amp#39;s pretend you have a company called Smarty Lighting and you do smart-city lighting s"/><meta name="twitter:image" content="http://localhost:8080/img/social/card.png"/><meta property="og:title" content="Streetlights | AsyncAPI Initiative for event-driven APIs"/><meta property="og:type" content="article"/><meta property="og:url" content="http://localhost:8080/docs/tutorials/streetlights"/><meta property="og:image" content="http://localhost:8080/img/social/card.png"/><meta property="og:description" content="In this tutorial, you get started with actual code and a (could-be) real-world use case. &amp;lt!--more--&amp;gt
Let&amp;amp#39;s pretend you have a company called Smarty Lighting and you do smart-city lighting s"/><title>Streetlights | AsyncAPI Initiative for event-driven APIs</title><meta name="next-head-count" content="23"/><link rel="preload" href="/_next/static/css/cedf33f8fb65848f9ac5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cedf33f8fb65848f9ac5.css"/><link rel="preload" href="/_next/static/css/99208ff840280a9dc815.css" as="style"/><link rel="stylesheet" href="/_next/static/css/99208ff840280a9dc815.css"/><link rel="preload" href="/_next/static/Tex625tf_lnUaoCgL3YGh/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/Tex625tf_lnUaoCgL3YGh/pages/docs/tutorials/streetlights.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-c212667a5f965e81e004.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.4dd1003cc9c949c7fcd3.js" as="script"/><link rel="preload" href="/_next/static/chunks/75fc9c18.3cfc8ccb85c1d7a11215.js" as="script"/><link rel="preload" href="/_next/static/chunks/ce56b752.ae226c74e10a6a4b10b8.js" as="script"/><link rel="preload" href="/_next/static/chunks/0557f841fc85a2834d7f888fce8afe60a4489f1d.c7c389ed4e650b7acdd9.js" as="script"/><link rel="preload" href="/_next/static/chunks/5d64a570782c3ceba4f83b61f6533a7ee91bc9f8.3990439058315e1f2df7.js" as="script"/><link rel="preload" href="/_next/static/chunks/be6d319af1fb18412639ef154d1e4d762d2a273e.4cb9699241b781436ae4.js" as="script"/><link rel="preload" href="/_next/static/chunks/4f5700c3a68d16ffc40162e6214bdf91e1aeaf40.af98a8a489a62e744487.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-9425739e3a9a3f3edaa6.js" as="script"/></head><body><div id="__next"><div class="flex bg-white min-h-screen xl:max-w-7xl xl:mx-auto"><div class="hidden lg:flex lg:flex-shrink-0"><div class="flex flex-col w-64 border-r border-gray-200 bg-white"><div class="flex-1 flex flex-col pt-5 md:overflow-y-auto md:sticky md:top-0 md:max-h-screen"><a class="flex" href="/"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 535.016 126.327" xml:space="preserve" class="h-8 w-auto ml-4 mt-0.5"><g fill="#1D1D1B"><path d="M154.912 21.665h10.54l24.425 71.451h-8.713l-5.678-17.129h-30.402l-5.677 17.129h-8.816l24.321-71.451zm18.343 46.821l-12.87-38.917-13.173 38.917h26.043zM202.901 92.709c-3.212-1.555-5.796-3.699-7.752-6.436-1.964-2.736-3.042-5.861-3.245-9.375l7.5-1.723c.134 2.568.844 4.832 2.128 6.791 1.281 1.961 3.005 3.445 5.168 4.459 2.162 1.012 4.561 1.52 7.196 1.52 2.295 0 4.357-.336 6.183-1.014 1.822-.674 3.292-1.672 4.408-2.99 1.116-1.318 1.671-2.752 1.671-4.307 0-1.756-.606-3.191-1.822-4.309-1.219-1.113-2.706-1.99-4.46-2.633-1.757-.643-4.054-1.334-6.893-2.08-3.92-1.012-7.11-2.025-9.578-3.037-2.464-1.015-4.544-2.517-6.232-4.511-1.691-1.993-2.533-4.612-2.533-7.854 0-2.838.76-5.423 2.281-7.753 1.519-2.33 3.579-4.156 6.18-5.473 2.602-1.317 5.525-1.976 8.769-1.976 3.176 0 6.116.659 8.818 1.976 2.699 1.317 4.898 3.127 6.585 5.422 1.688 2.298 2.672 4.864 2.94 7.704l-7.5 1.924c-.136-3.105-1.232-5.555-3.294-7.348-2.062-1.787-4.646-2.684-7.752-2.684-1.757 0-3.361.337-4.816 1.012-1.452.675-2.599 1.621-3.444 2.838a6.952 6.952 0 00-1.267 4.054c0 1.758.609 3.192 1.825 4.306 1.216 1.114 2.448 1.926 3.701 2.432 1.249.508 3.831 1.202 7.75 2.08 3.717 1.013 6.842 2.093 9.375 3.241 2.534 1.151 4.646 2.704 6.333 4.663 1.688 1.961 2.535 4.393 2.535 7.297 0 3.041-.88 5.795-2.635 8.26-1.758 2.467-4.14 4.393-7.145 5.777-3.009 1.385-6.402 2.078-10.188 2.078-3.985.001-7.582-.776-10.79-2.331zM246.73 116.322a25.078 25.078 0 01-8.359-5.777 26.296 26.296 0 01-5.524-8.613l6.486-4.357c1.147 4.119 3.277 7.447 6.384 9.98s6.722 3.803 10.845 3.803c3.176 0 5.963-.795 8.359-2.383 2.399-1.588 4.292-3.75 5.678-6.486 1.385-2.734 2.078-5.828 2.078-9.271l-.102-6.893c-.947 1.689-2.197 3.191-3.749 4.51a18.41 18.41 0 01-5.17 3.09c-1.893.744-3.816 1.117-5.776 1.117-3.513 0-6.638-.863-9.375-2.584-2.737-1.723-4.849-4.088-6.333-7.096-1.488-3.006-2.229-6.469-2.229-10.389V41.934h7.702v33.039c0 2.57.472 4.814 1.419 6.74.943 1.926 2.295 3.463 4.052 4.611 1.754 1.15 3.784 1.723 6.081 1.723 2.497 0 4.762-.609 6.791-1.824 2.025-1.217 3.632-2.887 4.812-5.016 1.184-2.129 1.775-4.545 1.775-7.246V41.934h7.701l.102 51.283c0 4.797-1.012 9.102-3.041 12.92-2.025 3.816-4.831 6.807-8.411 8.969-3.583 2.162-7.602 3.244-12.059 3.244-3.584 0-6.961-.676-10.137-2.028zM290.513 41.934h6.994l.708 6.791c1.419-2.635 3.479-4.746 6.185-6.335 2.7-1.584 5.538-2.381 8.511-2.381 3.514 0 6.639.88 9.375 2.635 2.737 1.759 4.865 4.14 6.385 7.145 1.521 3.009 2.281 6.437 2.281 10.288v33.04h-7.804v-33.04c0-2.499-.457-4.728-1.37-6.689-.911-1.958-2.263-3.497-4.054-4.611-1.79-1.114-3.833-1.673-6.131-1.673-2.432 0-4.66.61-6.688 1.826-2.025 1.216-3.648 2.887-4.864 5.016-1.216 2.128-1.825 4.544-1.825 7.246v31.925h-7.702V41.934zM350 91.492c-3.646-2.365-6.483-5.623-8.511-9.779s-3.009-8.869-2.94-14.137c0-5.337.93-10.084 2.788-14.241 1.858-4.155 4.475-7.413 7.854-9.779 3.377-2.365 7.262-3.548 11.655-3.548 3.378 0 6.486.746 9.323 2.23a21.238 21.238 0 017.146 6.03c1.923 2.533 3.255 5.489 4.003 8.867l-7.4 2.027c-.946-3.714-2.585-6.689-4.915-8.917-2.33-2.23-5.084-3.345-8.26-3.345-2.701 0-5.169.878-7.397 2.635s-3.969 4.207-5.219 7.346c-1.251 3.143-1.877 6.708-1.877 10.694 0 3.986.693 7.535 2.08 10.639 1.383 3.109 3.31 5.559 5.776 7.35 2.466 1.791 5.254 2.686 8.36 2.686 2.7 0 5.15-.641 7.346-1.926 2.196-1.283 3.989-3.074 5.372-5.371 1.387-2.297 2.283-4.898 2.686-7.805l7.4 1.623c-.542 3.918-1.876 7.414-4.003 10.488-2.131 3.074-4.816 5.475-8.058 7.197-3.243 1.721-6.827 2.584-10.743 2.584-4.66.001-8.815-1.183-12.466-3.548zM412.529 21.36h15.001l24.426 71.755h-12.67l-4.966-15.912h-28.375l-5.27 15.912h-12.468l24.322-71.755zm19.055 46.013l-11.453-35.27-11.652 35.27h23.105zM458.743 21.36h28.176c4.797 0 9.087.949 12.87 2.84 3.782 1.891 6.773 4.526 8.969 7.903 2.196 3.379 3.296 7.232 3.296 11.555 0 4.324-1.082 8.157-3.245 11.503-2.163 3.343-5.152 5.996-8.969 7.955-3.816 1.96-8.092 2.939-12.822 2.939h-16.416v27.06h-11.858V21.36zm26.859 34.56c2.635 0 5.049-.523 7.246-1.572 2.194-1.045 3.918-2.497 5.167-4.357 1.252-1.856 1.876-3.969 1.876-6.333s-.607-4.475-1.823-6.335c-1.218-1.856-2.905-3.31-5.068-4.357-2.162-1.047-4.628-1.572-7.397-1.572h-15V55.92h14.999zM519.855 21.36h12.16v71.755h-12.16V21.36z"></path></g><path fill="#4775B9" d="M46.5 121.416c-23.583 0-42.768-14.301-42.768-31.879h8.469c0 12.908 15.387 23.408 34.299 23.408s34.299-10.5 34.299-23.408h8.469c.001 17.578-19.183 31.879-42.768 31.879zM89.269 33.878H80.8c0-12.906-15.387-23.407-34.299-23.407s-34.299 10.5-34.299 23.407h-8.47C3.732 16.3 22.918 2 46.5 2c23.585 0 42.769 14.3 42.769 31.878z"></path><path fill="#63BA90" d="M6.715 57.486H61.114999999999995V65.955H6.715z" transform="rotate(35.914 33.912 61.719)"></path><path fill="#63BA90" d="M32.225 57.438H86.625V65.906H32.225z" transform="rotate(35.914 59.422 61.671)"></path></svg></a><nav class="flex-1 mt-3 pb-8 px-2 bg-white"><div><a class="mt-8 mb-2 text-primary-800 text-xs font-bold uppercase hover:text-primary-800 flex px-2 transition ease-in-out duration-150 focus:outline-none">Getting Started</a></div><div><a class="mb-3 text-sm flex px-2 transition ease-in-out duration-150 focus:outline-none font-normal text-gray-700 hover:text-primary-800 hover:font-normal" href="/docs/getting-started">Introduction</a></div><div><a class="mb-3 text-sm flex px-2 transition ease-in-out duration-150 focus:outline-none font-normal text-gray-700 hover:text-primary-800 hover:font-normal" href="/docs/getting-started/event-driven-architectures">Event-driven architectures</a></div><div><a class="mb-3 text-sm flex px-2 transition ease-in-out duration-150 focus:outline-none font-normal text-gray-700 hover:text-primary-800 hover:font-normal" href="/docs/getting-started/coming-from-openapi">Coming from OpenAPI</a></div><div><a class="mb-3 text-sm flex px-2 transition ease-in-out duration-150 focus:outline-none font-normal text-gray-700 hover:text-primary-800 hover:font-normal" href="/docs/getting-started/hello-world">Hello world</a></div><div><a class="mb-3 text-sm flex px-2 transition ease-in-out duration-150 focus:outline-none font-normal text-gray-700 hover:text-primary-800 hover:font-normal" href="/docs/getting-started/asyncapi-documents">AsyncAPI documents</a></div><div><a class="mb-3 text-sm flex px-2 transition ease-in-out duration-150 focus:outline-none font-normal text-gray-700 hover:text-primary-800 hover:font-normal" href="/docs/getting-started/servers">Servers</a></div><div><a class="mb-3 text-sm flex px-2 transition ease-in-out duration-150 focus:outline-none font-normal text-gray-700 hover:text-primary-800 hover:font-normal" href="/docs/getting-started/security">Adding security</a></div><div><a class="mt-8 mb-2 text-primary-800 text-xs font-bold uppercase hover:text-primary-800 flex px-2 transition ease-in-out duration-150 focus:outline-none">Tutorials</a></div><div><a class="mb-3 text-sm flex px-2 transition ease-in-out duration-150 focus:outline-none font-normal text-gray-700 hover:text-primary-800 hover:font-normal" href="/docs/tutorials">Overview</a></div><div><a class="mb-3 text-sm flex px-2 transition ease-in-out duration-150 focus:outline-none font-medium text-primary-600" href="/docs/tutorials/streetlights">Streetlights</a></div><div><a class="mb-3 text-sm flex px-2 transition ease-in-out duration-150 focus:outline-none font-normal text-gray-700 hover:text-primary-800 hover:font-normal" href="/docs/tutorials/streetlights-interactive">Streetlights - Interactive (Alpha)</a></div><div><a class="mt-8 mb-2 text-primary-800 text-xs font-bold uppercase hover:text-primary-800 flex px-2 transition ease-in-out duration-150 focus:outline-none">Specification</a></div><div><a class="mb-3 text-sm flex px-2 transition ease-in-out duration-150 focus:outline-none font-normal text-gray-700 hover:text-primary-800 hover:font-normal" href="/docs/specifications/v2.1.0">2.1.0</a></div><div><a class="mb-3 text-sm flex px-2 transition ease-in-out duration-150 focus:outline-none font-normal text-gray-700 hover:text-primary-800 hover:font-normal" href="/docs/specifications/v2.0.0">2.0.0</a></div><div><a class="mt-8 mb-2 text-primary-800 text-xs font-bold uppercase hover:text-primary-800 flex px-2 transition ease-in-out duration-150 focus:outline-none">Community</a></div><div><a class="mb-3 text-sm flex px-2 transition ease-in-out duration-150 focus:outline-none font-normal text-gray-700 hover:text-primary-800 hover:font-normal" href="/docs/community/tooling">Tooling</a></div></nav></div></div></div><div class="flex flex-col w-0 flex-1 max-w-full lg:max-w-(screen-16)"><div class="flex pl-1 pt-2 pb-2 sm:pl-3 sm:pt-3 lg:hidden"><div class="relative bg-white flex px-4 w-full lg:hidden z-50"><div class="flex w-full justify-between items-center py-6 lg:justify-start lg:space-x-10"><div class="lg:w-auto lg:flex-1"><a href="/" class="flex"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 535.016 126.327" xml:space="preserve" class="h-8 w-auto sm:h-8"><g fill="#1D1D1B"><path d="M154.912 21.665h10.54l24.425 71.451h-8.713l-5.678-17.129h-30.402l-5.677 17.129h-8.816l24.321-71.451zm18.343 46.821l-12.87-38.917-13.173 38.917h26.043zM202.901 92.709c-3.212-1.555-5.796-3.699-7.752-6.436-1.964-2.736-3.042-5.861-3.245-9.375l7.5-1.723c.134 2.568.844 4.832 2.128 6.791 1.281 1.961 3.005 3.445 5.168 4.459 2.162 1.012 4.561 1.52 7.196 1.52 2.295 0 4.357-.336 6.183-1.014 1.822-.674 3.292-1.672 4.408-2.99 1.116-1.318 1.671-2.752 1.671-4.307 0-1.756-.606-3.191-1.822-4.309-1.219-1.113-2.706-1.99-4.46-2.633-1.757-.643-4.054-1.334-6.893-2.08-3.92-1.012-7.11-2.025-9.578-3.037-2.464-1.015-4.544-2.517-6.232-4.511-1.691-1.993-2.533-4.612-2.533-7.854 0-2.838.76-5.423 2.281-7.753 1.519-2.33 3.579-4.156 6.18-5.473 2.602-1.317 5.525-1.976 8.769-1.976 3.176 0 6.116.659 8.818 1.976 2.699 1.317 4.898 3.127 6.585 5.422 1.688 2.298 2.672 4.864 2.94 7.704l-7.5 1.924c-.136-3.105-1.232-5.555-3.294-7.348-2.062-1.787-4.646-2.684-7.752-2.684-1.757 0-3.361.337-4.816 1.012-1.452.675-2.599 1.621-3.444 2.838a6.952 6.952 0 00-1.267 4.054c0 1.758.609 3.192 1.825 4.306 1.216 1.114 2.448 1.926 3.701 2.432 1.249.508 3.831 1.202 7.75 2.08 3.717 1.013 6.842 2.093 9.375 3.241 2.534 1.151 4.646 2.704 6.333 4.663 1.688 1.961 2.535 4.393 2.535 7.297 0 3.041-.88 5.795-2.635 8.26-1.758 2.467-4.14 4.393-7.145 5.777-3.009 1.385-6.402 2.078-10.188 2.078-3.985.001-7.582-.776-10.79-2.331zM246.73 116.322a25.078 25.078 0 01-8.359-5.777 26.296 26.296 0 01-5.524-8.613l6.486-4.357c1.147 4.119 3.277 7.447 6.384 9.98s6.722 3.803 10.845 3.803c3.176 0 5.963-.795 8.359-2.383 2.399-1.588 4.292-3.75 5.678-6.486 1.385-2.734 2.078-5.828 2.078-9.271l-.102-6.893c-.947 1.689-2.197 3.191-3.749 4.51a18.41 18.41 0 01-5.17 3.09c-1.893.744-3.816 1.117-5.776 1.117-3.513 0-6.638-.863-9.375-2.584-2.737-1.723-4.849-4.088-6.333-7.096-1.488-3.006-2.229-6.469-2.229-10.389V41.934h7.702v33.039c0 2.57.472 4.814 1.419 6.74.943 1.926 2.295 3.463 4.052 4.611 1.754 1.15 3.784 1.723 6.081 1.723 2.497 0 4.762-.609 6.791-1.824 2.025-1.217 3.632-2.887 4.812-5.016 1.184-2.129 1.775-4.545 1.775-7.246V41.934h7.701l.102 51.283c0 4.797-1.012 9.102-3.041 12.92-2.025 3.816-4.831 6.807-8.411 8.969-3.583 2.162-7.602 3.244-12.059 3.244-3.584 0-6.961-.676-10.137-2.028zM290.513 41.934h6.994l.708 6.791c1.419-2.635 3.479-4.746 6.185-6.335 2.7-1.584 5.538-2.381 8.511-2.381 3.514 0 6.639.88 9.375 2.635 2.737 1.759 4.865 4.14 6.385 7.145 1.521 3.009 2.281 6.437 2.281 10.288v33.04h-7.804v-33.04c0-2.499-.457-4.728-1.37-6.689-.911-1.958-2.263-3.497-4.054-4.611-1.79-1.114-3.833-1.673-6.131-1.673-2.432 0-4.66.61-6.688 1.826-2.025 1.216-3.648 2.887-4.864 5.016-1.216 2.128-1.825 4.544-1.825 7.246v31.925h-7.702V41.934zM350 91.492c-3.646-2.365-6.483-5.623-8.511-9.779s-3.009-8.869-2.94-14.137c0-5.337.93-10.084 2.788-14.241 1.858-4.155 4.475-7.413 7.854-9.779 3.377-2.365 7.262-3.548 11.655-3.548 3.378 0 6.486.746 9.323 2.23a21.238 21.238 0 017.146 6.03c1.923 2.533 3.255 5.489 4.003 8.867l-7.4 2.027c-.946-3.714-2.585-6.689-4.915-8.917-2.33-2.23-5.084-3.345-8.26-3.345-2.701 0-5.169.878-7.397 2.635s-3.969 4.207-5.219 7.346c-1.251 3.143-1.877 6.708-1.877 10.694 0 3.986.693 7.535 2.08 10.639 1.383 3.109 3.31 5.559 5.776 7.35 2.466 1.791 5.254 2.686 8.36 2.686 2.7 0 5.15-.641 7.346-1.926 2.196-1.283 3.989-3.074 5.372-5.371 1.387-2.297 2.283-4.898 2.686-7.805l7.4 1.623c-.542 3.918-1.876 7.414-4.003 10.488-2.131 3.074-4.816 5.475-8.058 7.197-3.243 1.721-6.827 2.584-10.743 2.584-4.66.001-8.815-1.183-12.466-3.548zM412.529 21.36h15.001l24.426 71.755h-12.67l-4.966-15.912h-28.375l-5.27 15.912h-12.468l24.322-71.755zm19.055 46.013l-11.453-35.27-11.652 35.27h23.105zM458.743 21.36h28.176c4.797 0 9.087.949 12.87 2.84 3.782 1.891 6.773 4.526 8.969 7.903 2.196 3.379 3.296 7.232 3.296 11.555 0 4.324-1.082 8.157-3.245 11.503-2.163 3.343-5.152 5.996-8.969 7.955-3.816 1.96-8.092 2.939-12.822 2.939h-16.416v27.06h-11.858V21.36zm26.859 34.56c2.635 0 5.049-.523 7.246-1.572 2.194-1.045 3.918-2.497 5.167-4.357 1.252-1.856 1.876-3.969 1.876-6.333s-.607-4.475-1.823-6.335c-1.218-1.856-2.905-3.31-5.068-4.357-2.162-1.047-4.628-1.572-7.397-1.572h-15V55.92h14.999zM519.855 21.36h12.16v71.755h-12.16V21.36z"></path></g><path fill="#4775B9" d="M46.5 121.416c-23.583 0-42.768-14.301-42.768-31.879h8.469c0 12.908 15.387 23.408 34.299 23.408s34.299-10.5 34.299-23.408h8.469c.001 17.578-19.183 31.879-42.768 31.879zM89.269 33.878H80.8c0-12.906-15.387-23.407-34.299-23.407s-34.299 10.5-34.299 23.407h-8.47C3.732 16.3 22.918 2 46.5 2c23.585 0 42.769 14.3 42.769 31.878z"></path><path fill="#63BA90" d="M6.715 57.486H61.114999999999995V65.955H6.715z" transform="rotate(35.914 33.912 61.719)"></path><path fill="#63BA90" d="M32.225 57.438H86.625V65.906H32.225z" transform="rotate(35.914 59.422 61.671)"></path></svg></a></div><div class="-mr-2 -my-2 lg:hidden"><button type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-150 ease-in-out"><svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button></div><nav class="hidden lg:flex space-x-10"><div class="relative"><button type="button" class=" group text-gray-500 inline-flex items-center space-x-2 text-base leading-6 font-medium hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150"><span>Learning</span><svg class="text-gray-400 h-5 w-5 group-hover:text-gray-500 group-focus:text-gray-500 transition ease-in-out duration-150" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="relative"><button type="button" class=" group text-gray-500 inline-flex items-center space-x-2 text-base leading-6 font-medium hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150"><span>Tools</span><svg class="text-gray-400 h-5 w-5 group-hover:text-gray-500 group-focus:text-gray-500 transition ease-in-out duration-150" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="relative"><button type="button" class=" group text-gray-500 inline-flex items-center space-x-2 text-base leading-6 font-medium hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150"><span>Community</span><svg class="text-gray-400 h-5 w-5 group-hover:text-gray-500 group-focus:text-gray-500 transition ease-in-out duration-150" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><a href="/blog" target="_self" class=" text-base leading-6 font-medium text-gray-500 hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150">Blog</a><a href="/roadmap" target="_self" class="text-green-400 font-bold text-base leading-6 font-medium text-gray-500 hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150">Roadmap</a><a href="/jobs" target="_self" class="text-primary-500 font-bold text-base leading-6 font-medium text-gray-500 hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150">Jobs</a></nav><div class="hidden lg:flex lg:flex-1"></div></div></div></div><div class="hidden lg:flex lg:border-b lg:border-gray-200"><div class="relative bg-white  z-50"><div class="flex w-full justify-between items-center py-6 lg:justify-start lg:space-x-10"><div class="-mr-2 -my-2 lg:hidden"><button type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-150 ease-in-out"><svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button></div><nav class="hidden lg:flex space-x-10"><div class="relative"><button type="button" class=" group text-gray-500 inline-flex items-center space-x-2 text-base leading-6 font-medium hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150"><span>Learning</span><svg class="text-gray-400 h-5 w-5 group-hover:text-gray-500 group-focus:text-gray-500 transition ease-in-out duration-150" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="relative"><button type="button" class=" group text-gray-500 inline-flex items-center space-x-2 text-base leading-6 font-medium hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150"><span>Tools</span><svg class="text-gray-400 h-5 w-5 group-hover:text-gray-500 group-focus:text-gray-500 transition ease-in-out duration-150" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="relative"><button type="button" class=" group text-gray-500 inline-flex items-center space-x-2 text-base leading-6 font-medium hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150"><span>Community</span><svg class="text-gray-400 h-5 w-5 group-hover:text-gray-500 group-focus:text-gray-500 transition ease-in-out duration-150" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><a href="/blog" target="_self" class=" text-base leading-6 font-medium text-gray-500 hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150">Blog</a><a href="/roadmap" target="_self" class="text-green-400 font-bold text-base leading-6 font-medium text-gray-500 hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150">Roadmap</a><a href="/jobs" target="_self" class="text-primary-500 font-bold text-base leading-6 font-medium text-gray-500 hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150">Jobs</a></nav><div class="hidden lg:flex lg:flex-1"></div></div></div></div><main class="relative z-0 pt-2 pb-6 focus:outline-none md:py-6" tabindex="0"><div class="lg:hidden"><button class="flex text-gray-500 px-4 sm:px-6 md:px-8 hover:text-gray-900 focus:outline-none" aria-label="Open sidebar"><span>Tutorials</span><svg class="pl-1 w-5 h-5 transform rotate-90" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><h1 class="px-4 text-4xl font-normal text-gray-800 font-sans antialiased sm:px-6 md:px-8">Streetlights</h1><div class="px-4 sm:px-6 md:px-8"><p class="text-sm font-normal text-gray-400 font-sans antialiased">Found an error? Have a suggestion?<a target="_blank" rel="noopener noreferrer" href="https://github.com/asyncapi/website/blob/master/pages/docs/tutorials/streetlights.md" class="ml-1 underline">Edit this page on Github</a></p></div><div class="xl:flex xl:flex-row-reverse"><div class="bg-blue-100 mt-4 p-4 sticky top-0 overflow-y-auto max-h-screen xl:bg-transparent xl:mt-0 xl:pt-0 xl:pb-8 xl:top-4 xl:max-h-(screen-16) xl:w-72  xl:block z-20"><div class="flex cursor-pointer  xl:cursor-auto"><h5 class="false flex-1 text-primary-500 font-medium uppercase tracking-wide text-sm font-sans antialiased xl:mb-4 xl:text-xs xl:text-gray-500 xl:font-thin">On this page</h5><div class="text-underline text-center p4 xl:hidden"><svg class="rotate-90 transform transition duration-200 ease-in-out h-6 -mt-0.5 text-primary-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></div></div><div class="hidden xl:block"><div class=""><a class="pl-0 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#system-description">System Description</a><a class="pl-0 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#technology">Technology</a><a class="pl-0 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#the-asyncapi-file">The AsyncAPI file</a><a class="pl-0 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#generating-code">Generating code</a><a class="pl-4 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#1-install-the-generator-to-use-it-as-a-command-line-tool">1. Install the generator to use it as a command-line tool</a><a class="pl-4 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#2-create-a-directory-for-your-projects-and-enter-it">2. Create a directory for your projects and enter it:</a><a class="pl-4 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#3-create-a-file-with-the-asyncapi-machine-readable-description-you-defined-before-on-windows-use-type-instead-of-cat">3. Create a file with the AsyncAPI machine-readable description you defined before. On Windows use `type` instead of `cat`:</a><a class="pl-4 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#4-trigger-generation-of-the-nodejs-code">4. Trigger generation of the Node.js code:</a><a class="pl-4 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#5-and-voila-list-all-files-in-directory-and-notice-that-nodejs-application-is-generated">5. And voilà! List all files in directory and notice that Node.js application is generated:</a><a class="pl-0 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#running-your-code">Running your code</a><a class="pl-4 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#1-install-dependencies-of-newly-generated-application">1. Install dependencies of newly generated application:</a><a class="pl-4 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#2-start-the-application">2. Start the application:</a><a class="pl-4 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#3-in-another-terminal-install-the-mqttjs-library">3. In another terminal install the MQTT.js library:</a><a class="pl-4 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#4-send-correct-message-to-your-application">4. Send correct message to your application:</a><a class="pl-4 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#5-send-incorrect-message-to-your-application">5. Send incorrect message to your application:</a><a class="pl-4 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#6-go-back-to-the-previous-terminal-and-notice-that-your-application-logs-the-message-you-just-sent-and-errors-related-to-invalid-message">6. Go back to the previous terminal and notice that your application logs the message you just sent and errors related to invalid message.</a><a class="pl-0 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#conclusions">Conclusions</a></div></div></div><div class="mt-8 px-4 sm:px-6 xl:px-8 xl:flex-1 xl:max-w-184"><article class="mb-32"><p class=" my-4 text-gray-700 font-normal font-sans antialiased">In this tutorial, you get started with actual code and a (could-be) real-world use case. <!-- -->
Let&#x27;s pretend you have a company called Smarty Lighting and you do smart-city lighting systems.</p><h1 id="system-description" class=" my-4 font-sans antialiased font-medium text-2xl">System Description</h1><p class=" my-4 text-gray-700 font-normal font-sans antialiased">You want to create a system capable of turning on/off the streetlights depending on the environmental conditions of each of them:</p><ul class=" my-4 ml-4 list-disc text-gray-700 font-normal font-sans antialiased"><li class=" my-3 text-gray-700 font-normal font-sans antialiased">You&#x27;re going to implement an event-driven architecture, with a Message Broker in its &quot;center&quot;.</li><li class=" my-3 text-gray-700 font-normal font-sans antialiased">Streetlights will send information about its environmental lighting to the broker.</li><li class=" my-3 text-gray-700 font-normal font-sans antialiased">None of the services waits for any kind of response. Think about it as <em>fire and forget</em>. You publish messages to the broker and that&#x27;s it. Your service doesn&#x27;t know who receives them.</li></ul><h1 id="technology" class=" my-4 font-sans antialiased font-medium text-2xl">Technology</h1><p class=" my-4 text-gray-700 font-normal font-sans antialiased">You&#x27;ll use Node.js to code APIs and Mosquitto as the message broker. Selected technology is irrelevant here, as things explained here in this tutorial are applicable to any other programming language and message brokers.</p><h1 id="the-asyncapi-file" class=" my-4 font-sans antialiased font-medium text-2xl">The AsyncAPI file</h1><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Let&#x27;s start by creating an AsyncAPI file to describe your API. It will help you generate the code and the documentation later.</p><div class=" relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span><span class="text-gray-600 block pl-2 pr-2">2
</span><span class="text-gray-600 block pl-2 pr-2">3
</span><span class="text-gray-600 block pl-2 pr-2">4
</span><span class="text-gray-600 block pl-2 pr-2">5
</span><span class="text-gray-600 block pl-2 pr-2">6
</span><span class="text-gray-600 block pl-2 pr-2">7
</span><span class="text-gray-600 block pl-2 pr-2">8
</span><span class="text-gray-600 block pl-2 pr-2">9
</span><span class="text-gray-600 block pl-2 pr-2">10
</span><span class="text-gray-600 block pl-2 pr-2">11
</span><span class="text-gray-600 block pl-2 pr-2">12
</span><span class="text-gray-600 block pl-2 pr-2">13
</span><span class="text-gray-600 block pl-2 pr-2">14
</span><span class="text-gray-600 block pl-2 pr-2">15
</span><span class="text-gray-600 block pl-2 pr-2">16
</span><span class="text-gray-600 block pl-2 pr-2">17
</span><span class="text-gray-600 block pl-2 pr-2">18
</span><span class="text-gray-600 block pl-2 pr-2">19
</span><span class="text-gray-600 block pl-2 pr-2">20
</span><span class="text-gray-600 block pl-2 pr-2">21
</span><span class="text-gray-600 block pl-2 pr-2">22
</span><span class="text-gray-600 block pl-2 pr-2">23
</span><span class="text-gray-600 block pl-2 pr-2">24
</span><span class="text-gray-600 block pl-2 pr-2">25
</span><span class="text-gray-600 block pl-2 pr-2">26
</span><span class="text-gray-600 block pl-2 pr-2">27
</span><span class="text-gray-600 block pl-2 pr-2">28
</span><span class="text-gray-600 block pl-2 pr-2">29
</span><span class="text-gray-600 block pl-2 pr-2">30
</span><span class="text-gray-600 block pl-2 pr-2">31
</span><span class="text-gray-600 block pl-2 pr-2">32
</span><span class="text-gray-600 block pl-2 pr-2">33
</span><span class="text-gray-600 block pl-2 pr-2">34
</span><span class="text-gray-600 block pl-2 pr-2">35
</span><span class="text-gray-600 block pl-2 pr-2">36
</span></code><code class="mr-8"><span class=" pr-8"><span style="color:#7edcda">asyncapi:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&#x27;2.1.0&#x27;</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">info:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  title:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Streetlights</span><span> </span><span style="color:#c0e2a3;font-weight:500">API</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  version:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&#x27;1.0.0&#x27;</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">|
</span></span><span class=" pr-8" style="color:#c0e2a3;font-weight:500">    The Smartylighting Streetlights API allows you
</span><span class=" pr-8" style="color:#c0e2a3;font-weight:500">    to remotely manage the city lights.
</span><span class=" pr-8"><span style="color:#c0e2a3;font-weight:500"></span><span style="color:#7edcda">  license:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    name:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Apache</span><span> </span><span style="color:#d8da68">2.0</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    url:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&#x27;https://www.apache.org/licenses/LICENSE-2.0&#x27;</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">servers:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  mosquitto:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    url:</span><span> </span><span style="color:#7edcda">mqtt://test.mosquitto.org</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    protocol:</span><span> </span><span style="color:#c0e2a3;font-weight:500">mqtt</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">channels:</span><span>
</span></span><span class=" pr-8"><span>  </span><span style="color:#c0e2a3;font-weight:500">light/measured:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    publish:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      summary:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Inform</span><span> </span><span style="color:#c0e2a3;font-weight:500">about</span><span> </span><span style="color:#c0e2a3;font-weight:500">environmental</span><span> </span><span style="color:#c0e2a3;font-weight:500">lighting</span><span> </span><span style="color:#c0e2a3;font-weight:500">conditions</span><span> </span><span style="color:#c0e2a3;font-weight:500">for</span><span> </span><span style="color:#c0e2a3;font-weight:500">a</span><span> </span><span style="color:#c0e2a3;font-weight:500">particular</span><span> </span><span style="color:#c0e2a3;font-weight:500">streetlight.</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      operationId:</span><span> </span><span style="color:#c0e2a3;font-weight:500">onLightMeasured</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      message:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">        name:</span><span> </span><span style="color:#c0e2a3;font-weight:500">LightMeasured</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">        payload:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">          type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">object</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">          properties:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">            id:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">integer</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              minimum:</span><span> </span><span style="color:#d8da68">0</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Id</span><span> </span><span style="color:#c0e2a3;font-weight:500">of</span><span> </span><span style="color:#c0e2a3;font-weight:500">the</span><span> </span><span style="color:#c0e2a3;font-weight:500">streetlight.</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">            lumens:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">integer</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              minimum:</span><span> </span><span style="color:#d8da68">0</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Light</span><span> </span><span style="color:#c0e2a3;font-weight:500">intensity</span><span> </span><span style="color:#c0e2a3;font-weight:500">measured</span><span> </span><span style="color:#c0e2a3;font-weight:500">in</span><span> </span><span style="color:#c0e2a3;font-weight:500">lumens.</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">            sentAt:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">string</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              format:</span><span> </span><span style="color:#c0e2a3;font-weight:500">date-time</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Date</span><span> </span><span style="color:#c0e2a3;font-weight:500">and</span><span> </span><span style="color:#c0e2a3;font-weight:500">time</span><span> </span><span style="color:#c0e2a3;font-weight:500">when</span><span> </span><span style="color:#c0e2a3;font-weight:500">the</span><span> </span><span style="color:#c0e2a3;font-weight:500">message</span><span> </span><span style="color:#c0e2a3;font-weight:500">was</span><span> </span><span style="color:#c0e2a3;font-weight:500">sent.</span></span></code></pre></div></div></div><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Let&#x27;s break it down into pieces:</p><div class=" relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span><span class="text-gray-600 block pl-2 pr-2">2
</span><span class="text-gray-600 block pl-2 pr-2">3
</span><span class="text-gray-600 block pl-2 pr-2">4
</span><span class="text-gray-600 block pl-2 pr-2">5
</span><span class="text-gray-600 block pl-2 pr-2">6
</span><span class="text-gray-600 block pl-2 pr-2">7
</span><span class="text-gray-600 block pl-2 pr-2">8
</span><span class="text-gray-600 block pl-2 pr-2">9
</span><span class="text-gray-600 block pl-2 pr-2">10
</span></code><code class="mr-8"><span class=" pr-8"><span style="color:#7edcda">asyncapi:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&#x27;2.1.0&#x27;</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">info:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  title:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Streetlights</span><span> </span><span style="color:#c0e2a3;font-weight:500">API</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  version:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&#x27;1.0.0&#x27;</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">|
</span></span><span class=" pr-8" style="color:#c0e2a3;font-weight:500">    The Smartylighting Streetlights API allows you
</span><span class=" pr-8" style="color:#c0e2a3;font-weight:500">    to remotely manage the city lights.
</span><span class=" pr-8"><span style="color:#c0e2a3;font-weight:500"></span><span style="color:#7edcda">  license:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    name:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Apache</span><span> </span><span style="color:#d8da68">2.0</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    url:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&#x27;https://www.apache.org/licenses/LICENSE-2.0&#x27;</span></span></code></pre></div></div></div><ul class=" my-4 ml-4 list-disc text-gray-700 font-normal font-sans antialiased"><li class=" my-3 text-gray-700 font-normal font-sans antialiased">The <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">asyncapi</code> field indicates you use AsyncAPI version 2.1.0.</li><li class=" my-3 text-gray-700 font-normal font-sans antialiased">Inside the <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">info</code> field you find information about the API, like its name, version, description, and its license.</li></ul><p class=" my-4 text-gray-700 font-normal font-sans antialiased">We&#x27;re now going for the <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">channels</code> section. It is used to describe the event names your API will be publishing and/or subscribing to.</p><div class=" relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span><span class="text-gray-600 block pl-2 pr-2">2
</span><span class="text-gray-600 block pl-2 pr-2">3
</span><span class="text-gray-600 block pl-2 pr-2">4
</span><span class="text-gray-600 block pl-2 pr-2">5
</span></code><code class="mr-8"><span class=" pr-8"><span style="color:#7edcda">channels:</span><span>
</span></span><span class=" pr-8"><span>  </span><span style="color:#c0e2a3;font-weight:500">light/measured:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    publish:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      summary:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Inform</span><span> </span><span style="color:#c0e2a3;font-weight:500">about</span><span> </span><span style="color:#c0e2a3;font-weight:500">environmental</span><span> </span><span style="color:#c0e2a3;font-weight:500">lighting</span><span> </span><span style="color:#c0e2a3;font-weight:500">conditions</span><span> </span><span style="color:#c0e2a3;font-weight:500">for</span><span> </span><span style="color:#c0e2a3;font-weight:500">a</span><span> </span><span style="color:#c0e2a3;font-weight:500">particular</span><span> </span><span style="color:#c0e2a3;font-weight:500">streetlight.</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      operationId:</span><span> </span><span style="color:#c0e2a3;font-weight:500">onLightMeasured</span></span></code></pre></div></div></div><p class=" my-4 text-gray-700 font-normal font-sans antialiased">In this example, <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">light/measured</code> is the channel name your API <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">publish</code> to. The <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">operationId</code> property, describes what will be the name of function or method that takes care of this functionality in generated code. To understand how the event should look like when publishing to that channel, there is the <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">payload</code> property:</p><div class=" relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span><span class="text-gray-600 block pl-2 pr-2">2
</span><span class="text-gray-600 block pl-2 pr-2">3
</span><span class="text-gray-600 block pl-2 pr-2">4
</span><span class="text-gray-600 block pl-2 pr-2">5
</span><span class="text-gray-600 block pl-2 pr-2">6
</span><span class="text-gray-600 block pl-2 pr-2">7
</span><span class="text-gray-600 block pl-2 pr-2">8
</span><span class="text-gray-600 block pl-2 pr-2">9
</span><span class="text-gray-600 block pl-2 pr-2">10
</span><span class="text-gray-600 block pl-2 pr-2">11
</span><span class="text-gray-600 block pl-2 pr-2">12
</span><span class="text-gray-600 block pl-2 pr-2">13
</span><span class="text-gray-600 block pl-2 pr-2">14
</span><span class="text-gray-600 block pl-2 pr-2">15
</span></code><code class="mr-8"><span class=" pr-8"><span style="color:#7edcda">      payload:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">        type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">object</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">        properties:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">          id:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">            type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">integer</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">            minimum:</span><span> </span><span style="color:#d8da68">0</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">            description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Id</span><span> </span><span style="color:#c0e2a3;font-weight:500">of</span><span> </span><span style="color:#c0e2a3;font-weight:500">the</span><span> </span><span style="color:#c0e2a3;font-weight:500">streetlight.</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">          lumens:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">            type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">integer</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">            minimum:</span><span> </span><span style="color:#d8da68">0</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">            description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Light</span><span> </span><span style="color:#c0e2a3;font-weight:500">intensity</span><span> </span><span style="color:#c0e2a3;font-weight:500">measured</span><span> </span><span style="color:#c0e2a3;font-weight:500">in</span><span> </span><span style="color:#c0e2a3;font-weight:500">lumens.</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">          sentAt:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">            type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">string</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">            format:</span><span> </span><span style="color:#c0e2a3;font-weight:500">date-time</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">            description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Date</span><span> </span><span style="color:#c0e2a3;font-weight:500">and</span><span> </span><span style="color:#c0e2a3;font-weight:500">time</span><span> </span><span style="color:#c0e2a3;font-weight:500">when</span><span> </span><span style="color:#c0e2a3;font-weight:500">the</span><span> </span><span style="color:#c0e2a3;font-weight:500">message</span><span> </span><span style="color:#c0e2a3;font-weight:500">was</span><span> </span><span style="color:#c0e2a3;font-weight:500">sent.</span></span></code></pre></div></div></div><p class=" my-4 text-gray-700 font-normal font-sans antialiased"><code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">Payload</code> property defines the content of the event using AsyncAPI schemas. It means that your event payload should contain an <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">id</code> and a <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">lumens</code> property —which are integers bigger than zero—, and a <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">sentAt</code> property that should be a string containing a date and time.</p><blockquote class=" italic font-sans antialiased text-gray-400 border-l-4 border-gray-400 pl-4 pt-1 pb-1 pr-1 my-4 bg-white"><p class=" my-4 text-gray-700 font-normal font-sans antialiased">JSON Schema Draft 07 is 100% compatible with AsyncAPI schemas.</p></blockquote><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Cool! So you&#x27;re done with your AsyncAPI file! Let&#x27;s get into generating code.</p><h1 id="generating-code" class=" my-4 font-sans antialiased font-medium text-2xl">Generating code</h1><p class=" my-4 text-gray-700 font-normal font-sans antialiased">To generate your code you&#x27;ll use the <a href="https://github.com/asyncapi/generator" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">AsyncAPI Generator</a> Node.js template.</p><h3 id="1-install-the-generator-to-use-it-as-a-command-line-tool" class=" my-4 font-sans antialiased font-medium text-lg">1. Install the generator to use it as a command-line tool</h3><div class=" relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span></code><code class="mr-8"><span class=" pr-8"><span>npm install -g @asyncapi/generator</span></span></code></pre></div></div></div><h3 id="2-create-a-directory-for-your-projects-and-enter-it" class=" my-4 font-sans antialiased font-medium text-lg">2. Create a directory for your projects and enter it:</h3><div class=" relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span></code><code class="mr-8"><span class=" pr-8"><span>mkdir streetlights &amp;&amp; </span><span style="color:#7edcda">cd</span><span> </span><span style="color:#c0e2a3;font-weight:500">&quot;</span><span style="color:#d6deeb;font-weight:500">$_</span><span style="color:#c0e2a3;font-weight:500">&quot;</span></span></code></pre></div></div></div><h3 id="3-create-a-file-with-the-asyncapi-machine-readable-description-you-defined-before-on-windows-use-type-instead-of-cat" class=" my-4 font-sans antialiased font-medium text-lg">3. Create a file with the AsyncAPI machine-readable description you defined before. On Windows use <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">type</code> instead of <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">cat</code>:</h3><div class=" relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span><span class="text-gray-600 block pl-2 pr-2">2
</span><span class="text-gray-600 block pl-2 pr-2">3
</span><span class="text-gray-600 block pl-2 pr-2">4
</span><span class="text-gray-600 block pl-2 pr-2">5
</span><span class="text-gray-600 block pl-2 pr-2">6
</span><span class="text-gray-600 block pl-2 pr-2">7
</span><span class="text-gray-600 block pl-2 pr-2">8
</span><span class="text-gray-600 block pl-2 pr-2">9
</span><span class="text-gray-600 block pl-2 pr-2">10
</span><span class="text-gray-600 block pl-2 pr-2">11
</span><span class="text-gray-600 block pl-2 pr-2">12
</span><span class="text-gray-600 block pl-2 pr-2">13
</span><span class="text-gray-600 block pl-2 pr-2">14
</span><span class="text-gray-600 block pl-2 pr-2">15
</span><span class="text-gray-600 block pl-2 pr-2">16
</span><span class="text-gray-600 block pl-2 pr-2">17
</span><span class="text-gray-600 block pl-2 pr-2">18
</span><span class="text-gray-600 block pl-2 pr-2">19
</span><span class="text-gray-600 block pl-2 pr-2">20
</span><span class="text-gray-600 block pl-2 pr-2">21
</span><span class="text-gray-600 block pl-2 pr-2">22
</span><span class="text-gray-600 block pl-2 pr-2">23
</span><span class="text-gray-600 block pl-2 pr-2">24
</span><span class="text-gray-600 block pl-2 pr-2">25
</span><span class="text-gray-600 block pl-2 pr-2">26
</span><span class="text-gray-600 block pl-2 pr-2">27
</span><span class="text-gray-600 block pl-2 pr-2">28
</span><span class="text-gray-600 block pl-2 pr-2">29
</span><span class="text-gray-600 block pl-2 pr-2">30
</span><span class="text-gray-600 block pl-2 pr-2">31
</span><span class="text-gray-600 block pl-2 pr-2">32
</span><span class="text-gray-600 block pl-2 pr-2">33
</span><span class="text-gray-600 block pl-2 pr-2">34
</span><span class="text-gray-600 block pl-2 pr-2">35
</span><span class="text-gray-600 block pl-2 pr-2">36
</span><span class="text-gray-600 block pl-2 pr-2">37
</span><span class="text-gray-600 block pl-2 pr-2">38
</span></code><code class="mr-8"><span class=" pr-8"><span style="color:#c0e2a3;font-weight:500">cat</span><span> </span><span style="color:#c0e2a3;font-weight:500">&lt;&lt;EOT</span><span> </span><span style="color:#c0e2a3;font-weight:500">&gt;&gt;</span><span> </span><span style="color:#c0e2a3;font-weight:500">asyncapi.yaml</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">asyncapi:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&#x27;2.1.0&#x27;</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">info:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  title:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Streetlights</span><span> </span><span style="color:#c0e2a3;font-weight:500">API</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  version:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&#x27;1.0.0&#x27;</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">|
</span></span><span class=" pr-8" style="color:#c0e2a3;font-weight:500">    The Smartylighting Streetlights API allows you
</span><span class=" pr-8" style="color:#c0e2a3;font-weight:500">    to remotely manage the city lights.
</span><span class=" pr-8"><span style="color:#c0e2a3;font-weight:500"></span><span style="color:#7edcda">  license:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    name:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Apache</span><span> </span><span style="color:#d8da68">2.0</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    url:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&#x27;https://www.apache.org/licenses/LICENSE-2.0&#x27;</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">servers:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  mosquitto:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    url:</span><span> </span><span style="color:#7edcda">mqtt://test.mosquitto.org</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    protocol:</span><span> </span><span style="color:#c0e2a3;font-weight:500">mqtt</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">channels:</span><span>
</span></span><span class=" pr-8"><span>  </span><span style="color:#c0e2a3;font-weight:500">light/measured:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    publish:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      summary:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Inform</span><span> </span><span style="color:#c0e2a3;font-weight:500">about</span><span> </span><span style="color:#c0e2a3;font-weight:500">environmental</span><span> </span><span style="color:#c0e2a3;font-weight:500">lighting</span><span> </span><span style="color:#c0e2a3;font-weight:500">conditions</span><span> </span><span style="color:#c0e2a3;font-weight:500">for</span><span> </span><span style="color:#c0e2a3;font-weight:500">a</span><span> </span><span style="color:#c0e2a3;font-weight:500">particular</span><span> </span><span style="color:#c0e2a3;font-weight:500">streetlight.</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      operationId:</span><span> </span><span style="color:#c0e2a3;font-weight:500">onLightMeasured</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      message:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">        name:</span><span> </span><span style="color:#c0e2a3;font-weight:500">LightMeasured</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">        payload:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">          type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">object</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">          properties:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">            id:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">integer</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              minimum:</span><span> </span><span style="color:#d8da68">0</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Id</span><span> </span><span style="color:#c0e2a3;font-weight:500">of</span><span> </span><span style="color:#c0e2a3;font-weight:500">the</span><span> </span><span style="color:#c0e2a3;font-weight:500">streetlight.</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">            lumens:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">integer</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              minimum:</span><span> </span><span style="color:#d8da68">0</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Light</span><span> </span><span style="color:#c0e2a3;font-weight:500">intensity</span><span> </span><span style="color:#c0e2a3;font-weight:500">measured</span><span> </span><span style="color:#c0e2a3;font-weight:500">in</span><span> </span><span style="color:#c0e2a3;font-weight:500">lumens.</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">            sentAt:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">string</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              format:</span><span> </span><span style="color:#c0e2a3;font-weight:500">date-time</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Date</span><span> </span><span style="color:#c0e2a3;font-weight:500">and</span><span> </span><span style="color:#c0e2a3;font-weight:500">time</span><span> </span><span style="color:#c0e2a3;font-weight:500">when</span><span> </span><span style="color:#c0e2a3;font-weight:500">the</span><span> </span><span style="color:#c0e2a3;font-weight:500">message</span><span> </span><span style="color:#c0e2a3;font-weight:500">was</span><span> </span><span style="color:#c0e2a3;font-weight:500">sent.</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#c0e2a3;font-weight:500">EOT</span></span></code></pre></div></div></div><h3 id="4-trigger-generation-of-the-nodejs-code" class=" my-4 font-sans antialiased font-medium text-lg">4. Trigger generation of the Node.js code:</h3><div class=" relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span></code><code class="mr-8"><span class=" pr-8"><span>ag asyncapi.yaml @asyncapi/nodejs-template -o output -p server=mosquitto</span></span></code></pre></div></div></div><h3 id="5-and-voilà-list-all-files-in-directory-and-notice-that-nodejs-application-is-generated" class=" my-4 font-sans antialiased font-medium text-lg">5. And voilà! List all files in directory and notice that Node.js application is generated:</h3><div class=" relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span></code><code class="mr-8"><span class=" pr-8"><span style="color:#7edcda">cd</span><span> output &amp;&amp; ls</span></span></code></pre></div></div></div><h1 id="running-your-code" class=" my-4 font-sans antialiased font-medium text-2xl">Running your code</h1><h3 id="1-install-dependencies-of-newly-generated-application" class=" my-4 font-sans antialiased font-medium text-lg">1. Install dependencies of newly generated application:</h3><div class=" relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span></code><code class="mr-8"><span class=" pr-8"><span>npm install</span></span></code></pre></div></div></div><h3 id="2-start-the-application" class=" my-4 font-sans antialiased font-medium text-lg">2. Start the application:</h3><div class=" relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span></code><code class="mr-8"><span class=" pr-8"><span>npm start</span></span></code></pre></div></div></div><h3 id="3-in-another-terminal-install-the-mqttjs-library" class=" my-4 font-sans antialiased font-medium text-lg">3. In another terminal install the MQTT.js library:</h3><div class=" relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span></code><code class="mr-8"><span class=" pr-8"><span>npm install mqtt -g</span></span></code></pre></div></div></div><h3 id="4-send-correct-message-to-your-application" class=" my-4 font-sans antialiased font-medium text-lg">4. Send correct message to your application:</h3><div class=" relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span></code><code class="mr-8"><span class=" pr-8"><span>mqtt pub -t </span><span style="color:#c0e2a3;font-weight:500">&#x27;light/measured&#x27;</span><span> -h </span><span style="color:#c0e2a3;font-weight:500">&#x27;test.mosquitto.org&#x27;</span><span> -m </span><span style="color:#c0e2a3;font-weight:500">&#x27;{&quot;id&quot;: 1, &quot;lumens&quot;: 3, &quot;sentAt&quot;: &quot;2017-06-07T12:34:32.000Z&quot;}&#x27;</span></span></code></pre></div></div></div><h3 id="5-send-incorrect-message-to-your-application" class=" my-4 font-sans antialiased font-medium text-lg">5. Send incorrect message to your application:</h3><div class=" relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span></code><code class="mr-8"><span class=" pr-8"><span>mqtt pub -t </span><span style="color:#c0e2a3;font-weight:500">&#x27;light/measured&#x27;</span><span> -h </span><span style="color:#c0e2a3;font-weight:500">&#x27;test.mosquitto.org&#x27;</span><span> -m </span><span style="color:#c0e2a3;font-weight:500">&#x27;{&quot;id&quot;: 1, &quot;lumens&quot;: &quot;3&quot;, &quot;sentAt&quot;: &quot;2017-06-07T12:34:32.000Z&quot;}&#x27;</span></span></code></pre></div></div></div><h3 id="6-go-back-to-the-previous-terminal-and-notice-that-your-application-logs-the-message-you-just-sent-and-errors-related-to-invalid-message" class=" my-4 font-sans antialiased font-medium text-lg">6. Go back to the previous terminal and notice that your application logs the message you just sent and errors related to invalid message.</h3><h1 id="conclusions" class=" my-4 font-sans antialiased font-medium text-2xl">Conclusions</h1><p class=" my-4 text-gray-700 font-normal font-sans antialiased">You&#x27;ve learned how to create an AsyncAPI description file and how to generate code from it. The code is a bootstrap and you&#x27;ll need to add your business logic into it. Take some time to play with it.
There are still lots of things to be covered but intent of this tutorial is to be simple so you get an idea of the potential.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">We would also like to see what you create with AsyncAPI. As an open-source project, we&#x27;re open to proposals, questions, suggestions, and contributions. If you don&#x27;t feel in the mood to contribute but you&#x27;re using AsyncAPI, just raise your hand <a href="https://github.com/asyncapi/asyncapi/issues/new" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">creating a issue in our Github repo</a> or <a href="https://www.asyncapi.com/slack-invite/" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">join our Slack channel</a>. Don&#x27;t be shy :)</p></article></div></div></main></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/docs/tutorials/streetlights","query":{},"buildId":"Tex625tf_lnUaoCgL3YGh","nextExport":true,"autoExport":true,"isFallback":false}</script><script nomodule="" src="/_next/static/runtime/polyfills-9a3984dd490beb07be5c.js"></script><script async="" data-next-page="/_app" src="/_next/static/Tex625tf_lnUaoCgL3YGh/pages/_app.js"></script><script async="" data-next-page="/docs/tutorials/streetlights" src="/_next/static/Tex625tf_lnUaoCgL3YGh/pages/docs/tutorials/streetlights.js"></script><script src="/_next/static/runtime/webpack-c212667a5f965e81e004.js" async=""></script><script src="/_next/static/chunks/framework.4dd1003cc9c949c7fcd3.js" async=""></script><script src="/_next/static/chunks/75fc9c18.3cfc8ccb85c1d7a11215.js" async=""></script><script src="/_next/static/chunks/ce56b752.ae226c74e10a6a4b10b8.js" async=""></script><script src="/_next/static/chunks/0557f841fc85a2834d7f888fce8afe60a4489f1d.c7c389ed4e650b7acdd9.js" async=""></script><script src="/_next/static/chunks/5d64a570782c3ceba4f83b61f6533a7ee91bc9f8.3990439058315e1f2df7.js" async=""></script><script src="/_next/static/chunks/be6d319af1fb18412639ef154d1e4d762d2a273e.4cb9699241b781436ae4.js" async=""></script><script src="/_next/static/chunks/4f5700c3a68d16ffc40162e6214bdf91e1aeaf40.af98a8a489a62e744487.js" async=""></script><script src="/_next/static/runtime/main-9425739e3a9a3f3edaa6.js" async=""></script><script src="/_next/static/Tex625tf_lnUaoCgL3YGh/_buildManifest.js" async=""></script><script src="/_next/static/Tex625tf_lnUaoCgL3YGh/_ssgManifest.js" async=""></script></body></html>