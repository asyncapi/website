(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"7ljp":function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h}));var r=n("q1tI"),o=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=o.a.createContext({}),p=function(e){var t=o.a.useContext(l),n=t;return e&&(n="function"===typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return(o.a.createElement(l.Provider,{value:t},e.children))},d="mdxType",b={inlineCode:"code",wrapper:function(e){var t=e.children;return(o.a.createElement(o.a.Fragment,{},t))}},m=o.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),u=p(n),d=r,m=u["".concat(s,".").concat(d)]||u[d]||b[d]||a;return n?o.a.createElement(m,i(i({ref:t},l),{},{components:n})):o.a.createElement(m,i({ref:t},l))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"===typeof e||r){var a=n.length,s=new Array(a);s[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[d]="string"===typeof e?e:r,s[1]=i;for(var l=2;l<a;l++)s[l]=n[l];return o.a.createElement.apply(null,s)}return o.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},F7XQ:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/event-streaming-an-additional-architectural-style-to-suplement-api-design",function(){return n("w0id")}])},Ff2n:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.d(t,"a",(function(){return r}))},Qetd:function(e,t,n){"use strict";var r=Object.assign.bind(Object);e.exports=r,e.exports.default=e.exports},w0id:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var r=n("wx14"),o=n("Ff2n"),a=n("q1tI"),s=n.n(a),i=n("7ljp"),c=(s.a.createElement,{}),l="wrapper";function p(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(i.b)(l,Object(r.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"This post originally appeared on ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"https://medium.com/capital-one-tech/event-streaming-an-additional-architectural-style-to-supplement-api-design-703c4f801722"}),"Capital One Tech"))),Object(i.b)("p",null,"The growth and adoption of web-based APIs is key to the transformational technology journey of any enterprise. Those APIs, whether they are RESTful or not, remain synchronous. They, like the web, utilize the pattern of HTTP to implement a request-response interaction approach."),Object(i.b)("p",null,"To illustrate, assume we have a project management API with the following interactions:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Create a project (e.g. POST /projects)"),Object(i.b)("li",{parentName:"ol"},"Create a new task (e.g. POST /projects/{projectId}/tasks)"),Object(i.b)("li",{parentName:"ol"},"Assign the task to someone on our team (e.g. POST /tasks/{taskId}/assignees)"),Object(i.b)("li",{parentName:"ol"},"The assignee marks the task as complete (e.g. PUT /tasks/{taskId})")),Object(i.b)("p",null,"An API following this design works if design of the user interface closely mirrors those endpoints. But suppose an additional application requirement is to \u2018automatically\u2019 update a task\u2019s status when marked complete by another user. With a request/response web-API, an option is to incessantly poll a status API on the chance a status might have changed. This is both cumbersome and error-prone.\nInstead of polling, we can introduce an ",Object(i.b)("strong",{parentName:"p"},"event-driven architecture"),"."),Object(i.b)("h2",{id:"introduction-to-event-driven-architecture"},"Introduction to Event-Driven Architecture"),Object(i.b)("p",null,"In an event-driven architecture (or EDA), an application is composed of independent components that react to events published by other components. EDA is popular for distributed applications, as new components may be introduced into a solution to solve emerging problems \u2014 without the knowledge of previously developed components. Message brokers are used as an intermediary for communication, producing a loosely coupled design by preventing components from directly communicating with one another."),Object(i.b)("p",null,"If you are familiar with service-oriented architecture (SOA), you have experienced EDA. Most service-oriented architectures used an enterprise service bus (ESB) for service communication rather than a message broker. Events were published to the ESB, where they were then routed to other services to integrate two or more software systems. However, ESBs proved problematic as they were used as \u201cintegration glue\u201d, causing integration code to become scattered across services, apps, and the ESB; fragile systems were created. This fragility produced a greater need for coordination between teams, slowing software delivery."),Object(i.b)("h2",{id:"the-emergence-of-a-microservice-and-event-driven-architecture"},"The Emergence of a Microservice and Event-Driven Architecture"),Object(i.b)("p",null,"To overcome this increased coordination, the microservice architecture was introduced as a replacement for traditional SOA. This newer distributed architecture, built on APIs and microservices, encourages \u201cdumb pipes, smart endpoints.\u201d Integration logic is pushed to the consumers and producers. Message brokers, rather than ESBs, are used for message routing, not integration logic. Services and APIs talk to one another while hiding implementation details. This loose coupling makes software more resilient to evolution as new requirements emerge."),Object(i.b)("p",null,"As enterprises shift to APIs backed by a microservice architecture, the number of published events has grown considerably. Message brokers are typically transactional in nature, ensuring once-and-only-once delivery of messages. While useful for traditional software development, the transactional nature of message brokers limits the scalability of service communication."),Object(i.b)("p",null,"Distributed streaming data platforms, such as Apache Kafka, now offer enterprises higher throughput than traditional message brokers. Kafka removes the need for transactional messaging found in message brokers, opting instead for turning events into message streams. These streams are accessible by any authorized subscriber and may be accessed real-time or processed sequentially from a predetermined location or at the start of the stream."),Object(i.b)("h2",{id:"api-design-with-event-streaming"},"API Design with Event Streaming"),Object(i.b)("p",null,"Event streams help software extend beyond the request-response approach common to web API styles such as REST, GraphQL, and gRPC. Software can communicate bi-directionally, removing the need for API consumers to continually poll for state changes. Instead, APIs publish events to an event stream for notification of data changes or important business events to any number of subscribed services for further processing."),Object(i.b)("p",null,"Let\u2019s revisit our previous example. We needed to solve two separate requirements:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Notification when a task is marked as completed. Our only option without a message-driven architecture is to require interested parties to constantly make API calls to see if the task has been completed (aka polling)"),Object(i.b)("li",{parentName:"ol"},"Alerting a project owner when a task has been modified or marked as completed. Our only option is to mix our user interface concerns with our API by making the API send an email. The API is no longer responsible for managing projects and tasks \u2014 it is now responsible for the content and look-and-feel for email alerts")),Object(i.b)("p",null,"If we introduce a message-driven architecture to our solution, we can develop an API that delivers project and task resources that offer the necessary capabilities (create, read, update, delete, and mark as complete). Our API doesn\u2019t need to know about how the task completion event notification will be used, including that an email will be sent. All it needs to do is publish event messages when those events occur and allow other services to take action as appropriate. Events this API may publish include:"),Object(i.b)("p",null,Object(i.b)("img",Object(r.a)({parentName:"p"},{src:"/img/posts/event-streaming-an-additional-architectural-style-to-suplement-api-design/event-examples.webp",alt:"Example of API events",title:"Example of API events"}))),Object(i.b)("p",null,"Interested parties can then subscribe to the event(s) they are interested in and safely ignore the rest. In our example, we may end up with three components:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("strong",{parentName:"li"},"Projects API")," \u2014 Manages the Projects and Project Tasks resources via a REST-based API. The API may be comprised of one or more microservices that implement the capabilities offered by the REST API. When any event, from the list in the table above, occurs then the API publishes an event into the appropriate message stream for consumption by event subscribers"),Object(i.b)("li",{parentName:"ol"},Object(i.b)("strong",{parentName:"li"},"Task Completed Email Microservice")," \u2014 Subscribes to the Task.Completed event, notifying project manager(s) via email when any task has been marked as completed"),Object(i.b)("li",{parentName:"ol"},Object(i.b)("strong",{parentName:"li"},"Task Modified Email Microservice")," \u2014 Subscribes to the Task.Updated event, notifying all team members via email when any task has been edited")),Object(i.b)("p",null,"The API has no awareness of the two microservices subscribed to the specific events; it just publishes the events to the appropriate message stream. The solution is considered loosely coupled and therefore capable of evolving over time as new requirements emerge, perhaps with new types of notifications (e.g. SMS, web dashboard alerts) or integrations (e.g. synching to JIRA)."),Object(i.b)("h2",{id:"conclusion"},"Conclusion"),Object(i.b)("p",null,"The demand for more robust methods of software communication is pushing the limits of today\u2019s interface solutions. Request/response-based APIs are essential. However, today\u2019s technical problems are now demanding event-driven support \u2014 in addition to request/response \u2014 to improve an API\u2019s capability offerings."),Object(i.b)("p",null,"As API designers, we must strive to use all available tools to offer a better developer experience. As you enhance your existing APIs and new APIs emerge, ask yourself:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"How can my solution architecture be improved by moving beyond standard REST APIs and into a loosely-coupled event-driven architecture?"),Object(i.b)("li",{parentName:"ol"},"What events should my API publish that would benefit API consumers?"),Object(i.b)("li",{parentName:"ol"},"How will my API consumers benefit from the addition of these events and how do they take advantage of them?")),Object(i.b)("p",null,"Let\u2019s shift our approach from strictly request-response to thinking in terms of how our APIs can not only offer endpoints for requests, but events that enable the API to push to other services. The result will be increased innovation and more transformative APIs both within and across our LOBs."))}p.isMDXComponent=!0},wx14:function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return r}))}},[["F7XQ",0,1]]]);