<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="description" content="How can you utilize code generation to speed up the development process and only focus on what is important - the business logic? In this miniseries, I will explore the ways AsyncAPI and code generati"/><link rel="alternate" type="application/rss+xml" title="RSS Feed for AsyncAPI Initiative Blog" href="/rss.xml"/><link rel="icon" href="/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="194x194" href="/favicon-194x194.png"/><meta itemProp="name" content="Designing your APIs with AsyncAPI (Part 1) | AsyncAPI Initiative for event-driven APIs"/><meta itemProp="description" content="How can you utilize code generation to speed up the development process and only focus on what is important - the business logic? In this miniseries, I will explore the ways AsyncAPI and code generati"/><meta itemProp="image" content="http://localhost:8080/img/posts/jonaslagoni-miniseries-part1/blog-miniseries-cover.webp"/><meta name="twitter:card" value="summary_large_image"/><meta name="twitter:title" content="Designing your APIs with AsyncAPI (Part 1) | AsyncAPI Initiative for event-driven APIs"/><meta name="twitter:description" content="How can you utilize code generation to speed up the development process and only focus on what is important - the business logic? In this miniseries, I will explore the ways AsyncAPI and code generati"/><meta name="twitter:image" content="http://localhost:8080/img/posts/jonaslagoni-miniseries-part1/blog-miniseries-cover.webp"/><meta property="og:title" content="Designing your APIs with AsyncAPI (Part 1) | AsyncAPI Initiative for event-driven APIs"/><meta property="og:type" content="article"/><meta property="og:url" content="http://localhost:8080/blog/designing_your_apis_with_asyncapi_part_1"/><meta property="og:image" content="http://localhost:8080/img/posts/jonaslagoni-miniseries-part1/blog-miniseries-cover.webp"/><meta property="og:description" content="How can you utilize code generation to speed up the development process and only focus on what is important - the business logic? In this miniseries, I will explore the ways AsyncAPI and code generati"/><title>Designing your APIs with AsyncAPI (Part 1) | AsyncAPI Initiative for event-driven APIs</title><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5cb852c7b57ed596" async=""></script><style>
                /* AddThis hack */

                #at4-share {
                    left: 50%;
                    margin-left: -500px !important;

                    &amp;amp;.addthis-animated {
                      animation-duration: 0s !important;
                    }
                }

                #at4-scc {
                    display: none !important;
                }
              </style><meta name="next-head-count" content="25"/><link rel="preload" href="/_next/static/css/cedf33f8fb65848f9ac5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cedf33f8fb65848f9ac5.css"/><link rel="preload" href="/_next/static/css/99208ff840280a9dc815.css" as="style"/><link rel="stylesheet" href="/_next/static/css/99208ff840280a9dc815.css"/><link rel="preload" href="/_next/static/Tex625tf_lnUaoCgL3YGh/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/Tex625tf_lnUaoCgL3YGh/pages/blog/designing_your_apis_with_asyncapi_part_1.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-c212667a5f965e81e004.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.4dd1003cc9c949c7fcd3.js" as="script"/><link rel="preload" href="/_next/static/chunks/75fc9c18.3cfc8ccb85c1d7a11215.js" as="script"/><link rel="preload" href="/_next/static/chunks/ce56b752.ae226c74e10a6a4b10b8.js" as="script"/><link rel="preload" href="/_next/static/chunks/0557f841fc85a2834d7f888fce8afe60a4489f1d.c7c389ed4e650b7acdd9.js" as="script"/><link rel="preload" href="/_next/static/chunks/5d64a570782c3ceba4f83b61f6533a7ee91bc9f8.3990439058315e1f2df7.js" as="script"/><link rel="preload" href="/_next/static/chunks/be6d319af1fb18412639ef154d1e4d762d2a273e.4cb9699241b781436ae4.js" as="script"/><link rel="preload" href="/_next/static/chunks/4f5700c3a68d16ffc40162e6214bdf91e1aeaf40.af98a8a489a62e744487.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-9425739e3a9a3f3edaa6.js" as="script"/></head><body><div id="__next"><div class="max-w-4xl block   px-4 sm:px-6 lg:px-8 mx-auto block   px-4 sm:px-6 lg:px-8"><div class="relative bg-white  z-50"><div class="flex w-full justify-between items-center py-6 lg:justify-start lg:space-x-10"><div class="lg:w-auto lg:flex-1"><a href="/" class="flex"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 535.016 126.327" xml:space="preserve" class="h-8 w-auto sm:h-8"><g fill="#1D1D1B"><path d="M154.912 21.665h10.54l24.425 71.451h-8.713l-5.678-17.129h-30.402l-5.677 17.129h-8.816l24.321-71.451zm18.343 46.821l-12.87-38.917-13.173 38.917h26.043zM202.901 92.709c-3.212-1.555-5.796-3.699-7.752-6.436-1.964-2.736-3.042-5.861-3.245-9.375l7.5-1.723c.134 2.568.844 4.832 2.128 6.791 1.281 1.961 3.005 3.445 5.168 4.459 2.162 1.012 4.561 1.52 7.196 1.52 2.295 0 4.357-.336 6.183-1.014 1.822-.674 3.292-1.672 4.408-2.99 1.116-1.318 1.671-2.752 1.671-4.307 0-1.756-.606-3.191-1.822-4.309-1.219-1.113-2.706-1.99-4.46-2.633-1.757-.643-4.054-1.334-6.893-2.08-3.92-1.012-7.11-2.025-9.578-3.037-2.464-1.015-4.544-2.517-6.232-4.511-1.691-1.993-2.533-4.612-2.533-7.854 0-2.838.76-5.423 2.281-7.753 1.519-2.33 3.579-4.156 6.18-5.473 2.602-1.317 5.525-1.976 8.769-1.976 3.176 0 6.116.659 8.818 1.976 2.699 1.317 4.898 3.127 6.585 5.422 1.688 2.298 2.672 4.864 2.94 7.704l-7.5 1.924c-.136-3.105-1.232-5.555-3.294-7.348-2.062-1.787-4.646-2.684-7.752-2.684-1.757 0-3.361.337-4.816 1.012-1.452.675-2.599 1.621-3.444 2.838a6.952 6.952 0 00-1.267 4.054c0 1.758.609 3.192 1.825 4.306 1.216 1.114 2.448 1.926 3.701 2.432 1.249.508 3.831 1.202 7.75 2.08 3.717 1.013 6.842 2.093 9.375 3.241 2.534 1.151 4.646 2.704 6.333 4.663 1.688 1.961 2.535 4.393 2.535 7.297 0 3.041-.88 5.795-2.635 8.26-1.758 2.467-4.14 4.393-7.145 5.777-3.009 1.385-6.402 2.078-10.188 2.078-3.985.001-7.582-.776-10.79-2.331zM246.73 116.322a25.078 25.078 0 01-8.359-5.777 26.296 26.296 0 01-5.524-8.613l6.486-4.357c1.147 4.119 3.277 7.447 6.384 9.98s6.722 3.803 10.845 3.803c3.176 0 5.963-.795 8.359-2.383 2.399-1.588 4.292-3.75 5.678-6.486 1.385-2.734 2.078-5.828 2.078-9.271l-.102-6.893c-.947 1.689-2.197 3.191-3.749 4.51a18.41 18.41 0 01-5.17 3.09c-1.893.744-3.816 1.117-5.776 1.117-3.513 0-6.638-.863-9.375-2.584-2.737-1.723-4.849-4.088-6.333-7.096-1.488-3.006-2.229-6.469-2.229-10.389V41.934h7.702v33.039c0 2.57.472 4.814 1.419 6.74.943 1.926 2.295 3.463 4.052 4.611 1.754 1.15 3.784 1.723 6.081 1.723 2.497 0 4.762-.609 6.791-1.824 2.025-1.217 3.632-2.887 4.812-5.016 1.184-2.129 1.775-4.545 1.775-7.246V41.934h7.701l.102 51.283c0 4.797-1.012 9.102-3.041 12.92-2.025 3.816-4.831 6.807-8.411 8.969-3.583 2.162-7.602 3.244-12.059 3.244-3.584 0-6.961-.676-10.137-2.028zM290.513 41.934h6.994l.708 6.791c1.419-2.635 3.479-4.746 6.185-6.335 2.7-1.584 5.538-2.381 8.511-2.381 3.514 0 6.639.88 9.375 2.635 2.737 1.759 4.865 4.14 6.385 7.145 1.521 3.009 2.281 6.437 2.281 10.288v33.04h-7.804v-33.04c0-2.499-.457-4.728-1.37-6.689-.911-1.958-2.263-3.497-4.054-4.611-1.79-1.114-3.833-1.673-6.131-1.673-2.432 0-4.66.61-6.688 1.826-2.025 1.216-3.648 2.887-4.864 5.016-1.216 2.128-1.825 4.544-1.825 7.246v31.925h-7.702V41.934zM350 91.492c-3.646-2.365-6.483-5.623-8.511-9.779s-3.009-8.869-2.94-14.137c0-5.337.93-10.084 2.788-14.241 1.858-4.155 4.475-7.413 7.854-9.779 3.377-2.365 7.262-3.548 11.655-3.548 3.378 0 6.486.746 9.323 2.23a21.238 21.238 0 017.146 6.03c1.923 2.533 3.255 5.489 4.003 8.867l-7.4 2.027c-.946-3.714-2.585-6.689-4.915-8.917-2.33-2.23-5.084-3.345-8.26-3.345-2.701 0-5.169.878-7.397 2.635s-3.969 4.207-5.219 7.346c-1.251 3.143-1.877 6.708-1.877 10.694 0 3.986.693 7.535 2.08 10.639 1.383 3.109 3.31 5.559 5.776 7.35 2.466 1.791 5.254 2.686 8.36 2.686 2.7 0 5.15-.641 7.346-1.926 2.196-1.283 3.989-3.074 5.372-5.371 1.387-2.297 2.283-4.898 2.686-7.805l7.4 1.623c-.542 3.918-1.876 7.414-4.003 10.488-2.131 3.074-4.816 5.475-8.058 7.197-3.243 1.721-6.827 2.584-10.743 2.584-4.66.001-8.815-1.183-12.466-3.548zM412.529 21.36h15.001l24.426 71.755h-12.67l-4.966-15.912h-28.375l-5.27 15.912h-12.468l24.322-71.755zm19.055 46.013l-11.453-35.27-11.652 35.27h23.105zM458.743 21.36h28.176c4.797 0 9.087.949 12.87 2.84 3.782 1.891 6.773 4.526 8.969 7.903 2.196 3.379 3.296 7.232 3.296 11.555 0 4.324-1.082 8.157-3.245 11.503-2.163 3.343-5.152 5.996-8.969 7.955-3.816 1.96-8.092 2.939-12.822 2.939h-16.416v27.06h-11.858V21.36zm26.859 34.56c2.635 0 5.049-.523 7.246-1.572 2.194-1.045 3.918-2.497 5.167-4.357 1.252-1.856 1.876-3.969 1.876-6.333s-.607-4.475-1.823-6.335c-1.218-1.856-2.905-3.31-5.068-4.357-2.162-1.047-4.628-1.572-7.397-1.572h-15V55.92h14.999zM519.855 21.36h12.16v71.755h-12.16V21.36z"></path></g><path fill="#4775B9" d="M46.5 121.416c-23.583 0-42.768-14.301-42.768-31.879h8.469c0 12.908 15.387 23.408 34.299 23.408s34.299-10.5 34.299-23.408h8.469c.001 17.578-19.183 31.879-42.768 31.879zM89.269 33.878H80.8c0-12.906-15.387-23.407-34.299-23.407s-34.299 10.5-34.299 23.407h-8.47C3.732 16.3 22.918 2 46.5 2c23.585 0 42.769 14.3 42.769 31.878z"></path><path fill="#63BA90" d="M6.715 57.486H61.114999999999995V65.955H6.715z" transform="rotate(35.914 33.912 61.719)"></path><path fill="#63BA90" d="M32.225 57.438H86.625V65.906H32.225z" transform="rotate(35.914 59.422 61.671)"></path></svg></a></div><div class="-mr-2 -my-2 lg:hidden"><button type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-150 ease-in-out"><svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button></div><nav class="hidden lg:flex space-x-10"><div class="relative"><button type="button" class=" group text-gray-500 inline-flex items-center space-x-2 text-base leading-6 font-medium hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150"><span>Learning</span><svg class="text-gray-400 h-5 w-5 group-hover:text-gray-500 group-focus:text-gray-500 transition ease-in-out duration-150" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="relative"><button type="button" class=" group text-gray-500 inline-flex items-center space-x-2 text-base leading-6 font-medium hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150"><span>Tools</span><svg class="text-gray-400 h-5 w-5 group-hover:text-gray-500 group-focus:text-gray-500 transition ease-in-out duration-150" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="relative"><button type="button" class=" group text-gray-500 inline-flex items-center space-x-2 text-base leading-6 font-medium hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150"><span>Community</span><svg class="text-gray-400 h-5 w-5 group-hover:text-gray-500 group-focus:text-gray-500 transition ease-in-out duration-150" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><a href="/blog" target="_self" class=" text-base leading-6 font-medium text-gray-500 hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150">Blog</a><a href="/roadmap" target="_self" class="text-green-400 font-bold text-base leading-6 font-medium text-gray-500 hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150">Roadmap</a><a href="/jobs" target="_self" class="text-primary-500 font-bold text-base leading-6 font-medium text-gray-500 hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150">Jobs</a></nav><div class="hidden lg:flex lg:flex-1"></div></div></div></div><div class="max-w-4xl lg:flex lg:flex-row-reverse  px-4 sm:px-6 lg:px-8 mx-auto lg:flex lg:flex-row-reverse  px-4 sm:px-6 lg:px-8"><div class="bg-blue-100 mt-4 p-4 sticky top-0 overflow-y-auto max-h-screen lg:bg-transparent lg:mt-0 lg:pt-0 lg:pb-8 lg:top-4 lg:max-h-(screen-16) lg:border-l lg:border-gray-200 lg:min-w-40 lg:max-w-64 lg:-mr-20 xl:min-w-72 xl:-mr-36  lg:block z-20"><div class="flex cursor-pointer  lg:cursor-auto"><h5 class="false flex-1 text-primary-500 font-medium uppercase tracking-wide text-sm font-sans antialiased lg:mb-4 lg:text-xs lg:text-gray-500 lg:font-thin">On this page</h5><div class="text-underline text-center p4 lg:hidden"><svg class="rotate-90 transform transition duration-200 ease-in-out h-6 -mt-0.5 text-primary-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></div></div><div class="hidden lg:block"><div class=""><a class="pl-0 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#backstory">Backstory</a><a class="pl-0 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#to-that-end">To that end</a><a class="pl-0 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#designing-the-apis-with-asyncapi">Designing the APIs with AsyncAPI</a><a class="pl-2 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#the-game-server">The game server</a><a class="pl-2 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#the-backend-processor">The backend processor</a><a class="pl-2 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#introducing-reusability">Introducing reusability</a><a class="pl-0 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#whats-next">What&#x27;s next</a><a class="pl-0 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#related-issues">Related issues</a></div></div></div><main class="mt-8 px-4 sm:px-6 lg:pr-8 lg:pl-0 lg:flex-1 lg:max-w-172 xl:max-w-172"><header class="pr-4 sm:pr-6 md:pr-8"><h1 class="text-4xl font-normal text-gray-800 font-sans antialiased">Designing your APIs with AsyncAPI (Part 1)</h1><div class="mt-6 flex items-center"><div class="relative flex-shrink-0"><a alt="Jonas Lagoni" href="https://github.com/jonaslagoni"><img title="Jonas Lagoni" class="relative mr-0 z-0 h-10 w-10 border-2 border-white rounded-full object-cover hover:z-50" src="/img/avatars/jonaslagoni.webp"/></a></div><div class="ml-3"><p class="text-sm leading-5 font-medium text-gray-900"><span class="hover:underline"><a alt="Jonas Lagoni" href="https://github.com/jonaslagoni">Jonas Lagoni</a></span></p><div class="flex text-sm leading-5 text-gray-500"><time dateTime="2021-06-01T11:00:00.000Z">June 1, 2021</time><span class="mx-1">Â·</span><span>10<!-- --> min read</span></div></div></div></header><article class="mb-32"><img src="/img/posts/jonaslagoni-miniseries-part1/blog-miniseries-cover.webp" class="mt-6 mb-6 w-full"/><p class=" my-4 text-gray-700 font-normal font-sans antialiased">How can you utilize code generation to speed up the development process and only focus on what is important - the business logic? In this miniseries, I will explore the ways AsyncAPI and code generation can work hand in hand beyond generating documentation.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Structure of the miniseries:</p><ul class=" my-4 ml-4 list-disc text-gray-700 font-normal font-sans antialiased"><li class=" my-3 text-gray-700 font-normal font-sans antialiased"><strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">Part 1: Designing your APIs with AsyncAPI</strong></li><li class=" my-3 text-gray-700 font-normal font-sans antialiased">Part 2: Implementing your applications using code generation</li><li class=" my-3 text-gray-700 font-normal font-sans antialiased">Part 3: Black-box testing the applications using code generation</li><li class=" my-3 text-gray-700 font-normal font-sans antialiased">Part 4: Introducing new changes when using code generation</li><li class=" my-3 text-gray-700 font-normal font-sans antialiased">Part 5: The path to 1 billion players - Scaling the applications and finding bottlenecks with tooling</li></ul><blockquote class=" italic font-sans antialiased text-gray-400 border-l-4 border-gray-400 pl-4 pt-1 pb-1 pr-1 my-4 bg-white"><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Don&#x27;t see this blog post series as anything other than an example workflow. This is purely how I do it with my applications and how I use AsyncAPI and its tooling to my advantage. Use this as an inspiration to finding an approach that works for you.</p></blockquote><h1 id="backstory" class=" my-4 font-sans antialiased font-medium text-2xl">Backstory</h1><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Back in 2019 when I started contributing to the tooling of AsyncAPI, I was still in university studying for a master&#x27;s in software engineering and had at that point been a student developer at a company called <a href="http://eurisco.dk/" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">EURISCO</a>, for about 3 years. Besides that, I have always had side projects that I worked on in my spare time, and it was one of these side projects that sparked my need for AsyncAPI. </p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">My side project at that time was a <a href="https://rust.facepunch.com/" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">Rust</a> game server plugin that collected in-game events, such as when a player farms resources, kills another player, loots a container, etc, and send them to a backend. Later these could be extracted by an API to display the player&#x27;s progression and detailed account of what the player did on the game server. </p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Initially, I used OpenAPI to describe the REST API, and the community tooling allowed me to generate clients and servers in different languages, which accelerated the implementation process.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">I soon encountered a use case that required me to push data to the game server, and solving this with REST was possible but cumbersome. So I started exploring different alternatives in terms of event-driven architecture. However, none could be described using OpenAPI removing tooling, so I had to find alternatives. </p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">That was when I vaguely remembered a meeting in the company where AsyncAPI was mentioned. Around that time, we began to switch from a custom socket protocol to <a href="https://nats.io/" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">NATS</a> and spend some time figuring out how to mainstream the process for both documenting and generating code for the APIs. This was where we had found AsyncAPI and started adopting the specification.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">So I started to look into AsyncAPI for my project, which sparked my first ever contribution to an open-source project, but that is a story for another time, maybe.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">So this blog post is a dedication to that experience, showcasing how I use AsyncAPI to document and generate code to speed up the development process and maybe spark your interest in helping us build the best tooling possible.</p><h1 id="to-that-end" class=" my-4 font-sans antialiased font-medium text-2xl">To that end</h1><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Explaining something is always better with actual examples, therefore I will be creating a little system to show you how code generation can support the development process. </p><figure><img src="/img/posts/jonaslagoni-miniseries-part1/blog-miniseries-general-setup.webp" title="General setup of the project"/><figcaption class="text-center text-gray-400 text-sm">The general setup of the project, with the two applications game server and processor. The round dot between &quot;some broker&quot; and the applications represent how others may grab/interact with the application, ergo its API.</figcaption></figure><p class=" my-4 text-gray-700 font-normal font-sans antialiased">I will be creating a system of two applications, a <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">game server</strong> and a <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">processor</strong> using a micro-service architecture with no public-facing API. How a player interacts with the <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">game server</strong> could be through a phone, a computer, Xbox, or PlayStation. I only care about the interaction between the <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">game server</strong> and the <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">processor</strong> in this blog post. </p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">The <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">game server</strong> will produce the following events: when players join the server, pick up items in-game, uses the chat, hit one another, and eventually disconnect. It will be implemented to simulate players at random intervals joins the server, perform the different actions, and eventually disconnect to provide a sense of realism. </p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">The backend <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">processor</strong> will be consuming these events to process them. In this series, I will not do anything particular with the data. The <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">Processor</strong> will simply save the received events directly to a database.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">I will not get into the specifics of the stack for this system yet since it does not affect the writing of the API documents for the two applications.</p><h1 id="designing-the-apis-with-asyncapi" class=" my-4 font-sans antialiased font-medium text-2xl">Designing the APIs with AsyncAPI</h1><p class=" my-4 text-gray-700 font-normal font-sans antialiased">When starting designing the application APIs I always use the <a href="https://apisyouwonthate.com/blog/api-design-first-vs-code-first" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">design first principle</a>, even when we are talking about internal systems.</p><h2 id="the-game-server" class=" my-4 font-sans antialiased font-medium text-xl">The game server</h2><p class=" my-4 text-gray-700 font-normal font-sans antialiased">I always start with the basics and define all the different channels for which the <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">game server</strong> should produce events over.</p><div class=" my-8"><div class="language-yaml rounded relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span><span class="text-gray-600 block pl-2 pr-2">2
</span><span class="text-gray-600 block pl-2 pr-2">3
</span><span class="text-gray-600 block pl-2 pr-2">4
</span><span class="text-gray-600 block pl-2 pr-2">5
</span><span class="text-gray-600 block pl-2 pr-2">6
</span><span class="text-gray-600 block pl-2 pr-2">7
</span><span class="text-gray-600 block pl-2 pr-2">8
</span><span class="text-gray-600 block pl-2 pr-2">9
</span><span class="text-gray-600 block pl-2 pr-2">10
</span><span class="text-gray-600 block pl-2 pr-2">11
</span><span class="text-gray-600 block pl-2 pr-2">12
</span><span class="text-gray-600 block pl-2 pr-2">13
</span><span class="text-gray-600 block pl-2 pr-2">14
</span><span class="text-gray-600 block pl-2 pr-2">15
</span></code><code class="mr-8"><span class=" pr-8"><span style="color:#7edcda">asyncapi:</span><span> </span><span style="color:#d8da68">2.0</span><span style="color:#d8da68">.0</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">info:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  title:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&quot;Game server&quot;</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  version:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&quot;0.0.1&quot;</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">channels:</span><span> 
</span></span><span class=" pr-8"><span>  </span><span style="color:#c0e2a3;font-weight:500">game/server/{serverId}/events/player/{playerId}/item/{itemId}/pickup:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Channel</span><span> </span><span style="color:#c0e2a3;font-weight:500">used</span><span> </span><span style="color:#c0e2a3;font-weight:500">when</span><span> </span><span style="color:#c0e2a3;font-weight:500">a</span><span> </span><span style="color:#c0e2a3;font-weight:500">player</span><span> </span><span style="color:#c0e2a3;font-weight:500">picks</span><span> </span><span style="color:#c0e2a3;font-weight:500">up</span><span> </span><span style="color:#c0e2a3;font-weight:500">an</span><span> </span><span style="color:#c0e2a3;font-weight:500">item</span><span> </span><span style="color:#c0e2a3;font-weight:500">in-game</span><span>
</span></span><span class=" pr-8"><span>  </span><span style="color:#c0e2a3;font-weight:500">game/server/{serverId}/events/player/{playerId}/connect:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Channel</span><span> </span><span style="color:#c0e2a3;font-weight:500">used</span><span> </span><span style="color:#c0e2a3;font-weight:500">when</span><span> </span><span style="color:#c0e2a3;font-weight:500">a</span><span> </span><span style="color:#c0e2a3;font-weight:500">player</span><span> </span><span style="color:#c0e2a3;font-weight:500">joins</span><span> </span><span style="color:#c0e2a3;font-weight:500">(connect</span><span> </span><span style="color:#c0e2a3;font-weight:500">to)</span><span> </span><span style="color:#c0e2a3;font-weight:500">the</span><span> </span><span style="color:#c0e2a3;font-weight:500">game</span><span> </span><span style="color:#c0e2a3;font-weight:500">server</span><span>
</span></span><span class=" pr-8"><span>  </span><span style="color:#c0e2a3;font-weight:500">game/server/{serverId}/events/player/{playerId}/disconnect:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Channel</span><span> </span><span style="color:#c0e2a3;font-weight:500">used</span><span> </span><span style="color:#c0e2a3;font-weight:500">when</span><span> </span><span style="color:#c0e2a3;font-weight:500">a</span><span> </span><span style="color:#c0e2a3;font-weight:500">player</span><span> </span><span style="color:#c0e2a3;font-weight:500">leaves</span><span> </span><span style="color:#c0e2a3;font-weight:500">(disconnects</span><span> </span><span style="color:#c0e2a3;font-weight:500">from)</span><span> </span><span style="color:#c0e2a3;font-weight:500">the</span><span> </span><span style="color:#c0e2a3;font-weight:500">game</span><span> </span><span style="color:#c0e2a3;font-weight:500">server</span><span>
</span></span><span class=" pr-8"><span>  </span><span style="color:#c0e2a3;font-weight:500">game/server/{serverId}/events/player/{playerId}/chat:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Channel</span><span> </span><span style="color:#c0e2a3;font-weight:500">used</span><span> </span><span style="color:#c0e2a3;font-weight:500">when</span><span> </span><span style="color:#c0e2a3;font-weight:500">a</span><span> </span><span style="color:#c0e2a3;font-weight:500">player</span><span> </span><span style="color:#c0e2a3;font-weight:500">writes</span><span> </span><span style="color:#c0e2a3;font-weight:500">something</span><span> </span><span style="color:#c0e2a3;font-weight:500">in</span><span> </span><span style="color:#c0e2a3;font-weight:500">chat</span><span>
</span></span><span class=" pr-8"><span>  </span><span style="color:#c0e2a3;font-weight:500">game/server/{serverId}/events/player/{playerId}/hit:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Channel</span><span> </span><span style="color:#c0e2a3;font-weight:500">used</span><span> </span><span style="color:#c0e2a3;font-weight:500">when</span><span> </span><span style="color:#c0e2a3;font-weight:500">a</span><span> </span><span style="color:#c0e2a3;font-weight:500">player</span><span> </span><span style="color:#c0e2a3;font-weight:500">hit</span><span> </span><span style="color:#c0e2a3;font-weight:500">another</span><span> </span><span style="color:#c0e2a3;font-weight:500">player</span><span> </span><span style="color:#c0e2a3;font-weight:500">in-game</span></span></code></pre></div></div></div></div><p class=" my-4 text-gray-700 font-normal font-sans antialiased">AsyncAPI channels have a different meaning based on the underlying setup. For brokers such as <a href="https://kafka.apache.org/" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">Apache Kafka</a>, this is referred to as <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">topics</code>. </p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">However, regardless of the underlying setup, channels must be defined as a <a href="https://www.asyncapi.com/docs/specifications/2.0.0#channelsObject" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">RFC 6570 URI template</a>. </p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">The way I like to structure my channels is to utilize parameters to separate the action from information about the event, so it describes, on what server the event was performed <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">{serverId}</code>, by what player <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">{playerId}</code> and in case of <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">pickup</strong>, what item <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">{itemId}</code> gets picked up. For the last part of the channel, I describe what event it was, <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">pickup</strong>, <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">connect</strong>, <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">disconnect</strong>, etc.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Next I define the actual definition of the channels, and here I will focus on explaining the channel <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">game/server/{server_id}/events/player/{player_id}/item/{item_id}/pickup</code>. The full AsyncAPI document can be found <a href="https://github.com/jonaslagoni/asyncapi-miniseries/blob/master/AsyncAPI/GameServer.yaml" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">here</a>.</p><div class=" my-8"><div class="language-YAML rounded relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span><span class="text-gray-600 block pl-2 pr-2">2
</span><span class="text-gray-600 block pl-2 pr-2">3
</span><span class="text-gray-600 block pl-2 pr-2">4
</span><span class="text-gray-600 block pl-2 pr-2">5
</span><span class="text-gray-600 block pl-2 pr-2">6
</span><span class="text-gray-600 block pl-2 pr-2">7
</span><span class="text-gray-600 block pl-2 pr-2">8
</span><span class="text-gray-600 block pl-2 pr-2">9
</span><span class="text-gray-600 block pl-2 pr-2">10
</span><span class="text-gray-600 block pl-2 pr-2">11
</span><span class="text-gray-600 block pl-2 pr-2">12
</span><span class="text-gray-600 block pl-2 pr-2">13
</span><span class="text-gray-600 block pl-2 pr-2">14
</span><span class="text-gray-600 block pl-2 pr-2">15
</span><span class="text-gray-600 block pl-2 pr-2">16
</span><span class="text-gray-600 block pl-2 pr-2">17
</span><span class="text-gray-600 block pl-2 pr-2">18
</span><span class="text-gray-600 block pl-2 pr-2">19
</span><span class="text-gray-600 block pl-2 pr-2">20
</span><span class="text-gray-600 block pl-2 pr-2">21
</span><span class="text-gray-600 block pl-2 pr-2">22
</span><span class="text-gray-600 block pl-2 pr-2">23
</span><span class="text-gray-600 block pl-2 pr-2">24
</span><span class="text-gray-600 block pl-2 pr-2">25
</span><span class="text-gray-600 block pl-2 pr-2">26
</span><span class="text-gray-600 block pl-2 pr-2">27
</span><span class="text-gray-600 block pl-2 pr-2">28
</span></code><code class="mr-8"><span class=" pr-8"><span style="color:#c0e2a3;font-weight:500">...</span><span>
</span></span><span class=" pr-8"><span>  </span><span style="color:#c0e2a3;font-weight:500">game/server/{serverId}/events/player/{playerId}/item/{itemId}/pickup:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Channel</span><span> </span><span style="color:#c0e2a3;font-weight:500">used</span><span> </span><span style="color:#c0e2a3;font-weight:500">when</span><span> </span><span style="color:#c0e2a3;font-weight:500">a</span><span> </span><span style="color:#c0e2a3;font-weight:500">player</span><span> </span><span style="color:#c0e2a3;font-weight:500">picks</span><span> </span><span style="color:#c0e2a3;font-weight:500">up</span><span> </span><span style="color:#c0e2a3;font-weight:500">an</span><span> </span><span style="color:#c0e2a3;font-weight:500">item</span><span> </span><span style="color:#c0e2a3;font-weight:500">in-game</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    parameters:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      serverId:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">        description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">The</span><span> </span><span style="color:#c0e2a3;font-weight:500">id</span><span> </span><span style="color:#c0e2a3;font-weight:500">of</span><span> </span><span style="color:#c0e2a3;font-weight:500">the</span><span> </span><span style="color:#c0e2a3;font-weight:500">server</span><span> </span><span style="color:#c0e2a3;font-weight:500">the</span><span> </span><span style="color:#c0e2a3;font-weight:500">action</span><span> </span><span style="color:#c0e2a3;font-weight:500">was</span><span> </span><span style="color:#c0e2a3;font-weight:500">performed</span><span> </span><span style="color:#c0e2a3;font-weight:500">on</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">        schema:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">          type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">string</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      playerId:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">        description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">The</span><span> </span><span style="color:#c0e2a3;font-weight:500">id</span><span> </span><span style="color:#c0e2a3;font-weight:500">of</span><span> </span><span style="color:#c0e2a3;font-weight:500">the</span><span> </span><span style="color:#c0e2a3;font-weight:500">player</span><span> </span><span style="color:#c0e2a3;font-weight:500">who</span><span> </span><span style="color:#c0e2a3;font-weight:500">performed</span><span> </span><span style="color:#c0e2a3;font-weight:500">the</span><span> </span><span style="color:#c0e2a3;font-weight:500">action</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">        schema:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">          type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">string</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      itemId:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">        description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">The</span><span> </span><span style="color:#c0e2a3;font-weight:500">id</span><span> </span><span style="color:#c0e2a3;font-weight:500">of</span><span> </span><span style="color:#c0e2a3;font-weight:500">item</span><span> </span><span style="color:#c0e2a3;font-weight:500">picked</span><span> </span><span style="color:#c0e2a3;font-weight:500">up</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">        schema:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">          type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">string</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    subscribe:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      message:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">        payload:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">          type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">object</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">          properties:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">            pickupTimestamp:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">string</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              format:</span><span> </span><span style="color:#c0e2a3;font-weight:500">date-time</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">              description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">The</span><span> </span><span style="color:#c0e2a3;font-weight:500">timestamp</span><span> </span><span style="color:#c0e2a3;font-weight:500">the</span><span> </span><span style="color:#c0e2a3;font-weight:500">item</span><span> </span><span style="color:#c0e2a3;font-weight:500">was</span><span> </span><span style="color:#c0e2a3;font-weight:500">picked</span><span> </span><span style="color:#c0e2a3;font-weight:500">up</span><span>
</span></span><span class=" pr-8"><span>          </span><span style="color:#c0e2a3;font-weight:500">$id:</span><span> </span><span style="color:#c0e2a3;font-weight:500">PlayerItemPickupPayload</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">          additionalProperties:</span><span> </span><span style="color:#64a0dc">false</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#c0e2a3;font-weight:500">...</span></span></code></pre></div></div></div></div><p class=" my-4 text-gray-700 font-normal font-sans antialiased">First, I have the definition of <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">parameters</strong> used in the channel. <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">serverId</strong> tells us where the action originates from, the <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">playerId</strong> tells us who performed the action, and the <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">itemId</strong> tells us which item was picked up and should all validate against a value with type <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">string</strong>.</p><figure><img src="/img/posts/jonaslagoni-miniseries-part1/blog-miniseries-gameserver-api.webp" title="Game server setup"/><figcaption class="text-center text-gray-400 text-sm">Displays the game server API as it is described with AsyncAPI with version 2.0.0. The round dot between &quot;some broker&quot; and the game server represent how others may grab/consume the produced event from the game server.</figcaption></figure><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Next, we have the <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">subscribe</strong> operation, which might not make much sense at first glance. I do want the <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">game server</strong> to publish this event, right?</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">And you would be correct, but this is how you currently define operations in AsyncAPI. You define the operation others may interact with. This means that the <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">game server</strong> publishes on this channel and others may <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">subscribe</strong> to it <!-- -->[<a href="#view-property" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">1</a>]<!-- -->[<a href="#clarify-view" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">3</a>]<!-- -->. If you want a more detailed explanation, I suggest reading Nic Townsend&#x27;s post about <a href="https://www.asyncapi.com/blog/publish-subscribe-semantics" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">Demystifying the Semantics of Publish and Subscribe</a>. </p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">The <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">payload</strong> of the channel (is described using a super-set of JSON Schema draft 7) should validate against an <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">object</strong> which contains the property <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">pickupTimestamp</strong>, which should validate against a <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">string</strong>. When <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">additionalProperties</strong> is <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">false</strong>, no extra properties may be added to the object (by default this is <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">true</strong> in JSON Schema draft 7). The <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">$id</strong> keyword is used as an identifier for that specific schema, in this case, I name the object schema <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">PlayerItemPickupPayload</strong>.</p><h2 id="the-backend-processor" class=" my-4 font-sans antialiased font-medium text-xl">The backend processor</h2><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Next, I design the <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">processor</strong> API, which contains all the same channels as the <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">game server</strong>, but with a different operation keyword. </p><figure><img src="/img/posts/jonaslagoni-miniseries-part1/blog-miniseries-processor-api.webp" title="Processor setup"/><figcaption class="text-center text-gray-400 text-sm">Displays the processor API as it is described with AsyncAPI with version 2.0.0. The round dot between &quot;some broker&quot; and the processor represent how others may grab/provide events that the processor subscribes to.</figcaption></figure><p class=" my-4 text-gray-700 font-normal font-sans antialiased">This is again because I need to define how others may interact with our <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">processor</strong>. This means that instead of using the <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">subscribe</code> operation I use <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">publish</code> to tell others that they can publish to this channel since the backend <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">processor</strong> is subscribing to it. The full AsyncAPI document for the <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">processor</strong> can be found <a href="https://github.com/jonaslagoni/asyncapi-miniseries/blob/master/AsyncAPI/Processor.yaml" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">here</a>.</p><div class=" my-8"><div class="language-yaml rounded relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span><span class="text-gray-600 block pl-2 pr-2">2
</span><span class="text-gray-600 block pl-2 pr-2">3
</span><span class="text-gray-600 block pl-2 pr-2">4
</span><span class="text-gray-600 block pl-2 pr-2">5
</span><span class="text-gray-600 block pl-2 pr-2">6
</span></code><code class="mr-8"><span class=" pr-8"><span style="color:#c0e2a3;font-weight:500">...</span><span>
</span></span><span class=" pr-8"><span>  </span><span style="color:#c0e2a3;font-weight:500">game/server/{serverId}/events/player/{playerId}/item/{itemId}/pickup:</span><span>
</span></span><span class=" pr-8"><span>    </span><span style="color:#c0e2a3;font-weight:500">...</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    publish:</span><span> 
</span></span><span class=" pr-8"><span>      </span><span style="color:#c0e2a3;font-weight:500">...</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#c0e2a3;font-weight:500">...</span></span></code></pre></div></div></div></div><h2 id="introducing-reusability" class=" my-4 font-sans antialiased font-medium text-xl">Introducing reusability</h2><p class=" my-4 text-gray-700 font-normal font-sans antialiased">At the moment, each of the AsyncAPI documents contains its definition of the channels. But what if I were to add a new validation rule such as a new property to the <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">playerItemPickupPayload</strong><undefined> schema? In this case, I would have to change this for both applications, which is way too much work <span role="img" aria-label="smiling face with open mouth &amp; smiling eyes">ð</span></undefined></p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Therefore, we can introduce <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">$ref</strong> to separate the parameters and messages into smaller sections for reusability. I will be placing all separate components into a <a href="https://github.com/jonaslagoni/asyncapi-miniseries/tree/master/AsyncAPI" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">&quot;components&quot; directory</a> in the same directory the AsyncAPI documents reside.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Just a quick note, at the moment, it is not possible to reuse channels and operations directly between the two applications. Therefore we can only apply this to the parameters and message individually while keeping some duplicate information <!-- -->[<a href="#channel-reusability" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">2</a>]<!-- -->. </p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">First, I separate the different parameters. For simplicity, I add all of them into the same file <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">./components/Parameters.yaml</code>.</p><div class=" my-8"><div class="language-yaml rounded relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span><span class="text-gray-600 block pl-2 pr-2">2
</span><span class="text-gray-600 block pl-2 pr-2">3
</span><span class="text-gray-600 block pl-2 pr-2">4
</span><span class="text-gray-600 block pl-2 pr-2">5
</span><span class="text-gray-600 block pl-2 pr-2">6
</span><span class="text-gray-600 block pl-2 pr-2">7
</span><span class="text-gray-600 block pl-2 pr-2">8
</span><span class="text-gray-600 block pl-2 pr-2">9
</span><span class="text-gray-600 block pl-2 pr-2">10
</span><span class="text-gray-600 block pl-2 pr-2">11
</span><span class="text-gray-600 block pl-2 pr-2">12
</span></code><code class="mr-8"><span class=" pr-8"><span style="color:#7edcda">serverId:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">The</span><span> </span><span style="color:#c0e2a3;font-weight:500">id</span><span> </span><span style="color:#c0e2a3;font-weight:500">of</span><span> </span><span style="color:#c0e2a3;font-weight:500">the</span><span> </span><span style="color:#c0e2a3;font-weight:500">server</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  schema:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">string</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">playerId:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">The</span><span> </span><span style="color:#c0e2a3;font-weight:500">id</span><span> </span><span style="color:#c0e2a3;font-weight:500">of</span><span> </span><span style="color:#c0e2a3;font-weight:500">the</span><span> </span><span style="color:#c0e2a3;font-weight:500">player</span><span> </span><span style="color:#c0e2a3;font-weight:500">who</span><span> </span><span style="color:#c0e2a3;font-weight:500">performed</span><span> </span><span style="color:#c0e2a3;font-weight:500">the</span><span> </span><span style="color:#c0e2a3;font-weight:500">action</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  schema:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">string</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">itemId:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">The</span><span> </span><span style="color:#c0e2a3;font-weight:500">id</span><span> </span><span style="color:#c0e2a3;font-weight:500">of</span><span> </span><span style="color:#c0e2a3;font-weight:500">the</span><span> </span><span style="color:#c0e2a3;font-weight:500">item</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  schema:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">string</span></span></code></pre></div></div></div></div><p class=" my-4 text-gray-700 font-normal font-sans antialiased">And then change all the channel parameters to reference the external parameter definition.</p><div class=" my-8"><div class="language-yaml rounded relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span><span class="text-gray-600 block pl-2 pr-2">2
</span><span class="text-gray-600 block pl-2 pr-2">3
</span><span class="text-gray-600 block pl-2 pr-2">4
</span><span class="text-gray-600 block pl-2 pr-2">5
</span><span class="text-gray-600 block pl-2 pr-2">6
</span><span class="text-gray-600 block pl-2 pr-2">7
</span><span class="text-gray-600 block pl-2 pr-2">8
</span><span class="text-gray-600 block pl-2 pr-2">9
</span><span class="text-gray-600 block pl-2 pr-2">10
</span><span class="text-gray-600 block pl-2 pr-2">11
</span><span class="text-gray-600 block pl-2 pr-2">12
</span></code><code class="mr-8"><span class=" pr-8"><span style="color:#c0e2a3;font-weight:500">...</span><span>
</span></span><span class=" pr-8"><span>  </span><span style="color:#c0e2a3;font-weight:500">game/server/{serverId}/events/player/{playerId}/item/{itemId}/pickup:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Channel</span><span> </span><span style="color:#c0e2a3;font-weight:500">used</span><span> </span><span style="color:#c0e2a3;font-weight:500">when</span><span> </span><span style="color:#c0e2a3;font-weight:500">a</span><span> </span><span style="color:#c0e2a3;font-weight:500">player</span><span> </span><span style="color:#c0e2a3;font-weight:500">picks</span><span> </span><span style="color:#c0e2a3;font-weight:500">up</span><span> </span><span style="color:#c0e2a3;font-weight:500">an</span><span> </span><span style="color:#c0e2a3;font-weight:500">item</span><span> </span><span style="color:#c0e2a3;font-weight:500">in-game</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    parameters:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      serverId:</span><span> 
</span></span><span class=" pr-8"><span>        </span><span style="color:#c0e2a3;font-weight:500">$ref:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&quot;./components/Parameters.yaml#/serverId&quot;</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      playerId:</span><span> 
</span></span><span class=" pr-8"><span>        </span><span style="color:#c0e2a3;font-weight:500">$ref:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&quot;./components/Parameters.yaml#/playerId&quot;</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      itemId:</span><span> 
</span></span><span class=" pr-8"><span>        </span><span style="color:#c0e2a3;font-weight:500">$ref:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&quot;./components/Parameters.yaml#/itemId&quot;</span><span>
</span></span><span class=" pr-8"><span>    </span><span style="color:#c0e2a3;font-weight:500">...</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#c0e2a3;font-weight:500">...</span></span></code></pre></div></div></div></div><p class=" my-4 text-gray-700 font-normal font-sans antialiased">For the messages, I add a new file per message instead of keeping everything in the same file as parameters. I use this approach since I find it easier to maintain and extend.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">We add the message file <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">./components/messages/PlayerItemPickup.yaml</code></p><div class=" my-8"><div class="language-yaml rounded relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span><span class="text-gray-600 block pl-2 pr-2">2
</span><span class="text-gray-600 block pl-2 pr-2">3
</span><span class="text-gray-600 block pl-2 pr-2">4
</span><span class="text-gray-600 block pl-2 pr-2">5
</span><span class="text-gray-600 block pl-2 pr-2">6
</span><span class="text-gray-600 block pl-2 pr-2">7
</span><span class="text-gray-600 block pl-2 pr-2">8
</span><span class="text-gray-600 block pl-2 pr-2">9
</span></code><code class="mr-8"><span class=" pr-8"><span style="color:#7edcda">payload:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">object</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  properties:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    pickupTimestamp:</span><span>     
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      type:</span><span> </span><span style="color:#c0e2a3;font-weight:500">string</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      format:</span><span> </span><span style="color:#c0e2a3;font-weight:500">date-time</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">The</span><span> </span><span style="color:#c0e2a3;font-weight:500">timestamp</span><span> </span><span style="color:#c0e2a3;font-weight:500">the</span><span> </span><span style="color:#c0e2a3;font-weight:500">item</span><span> </span><span style="color:#c0e2a3;font-weight:500">was</span><span> </span><span style="color:#c0e2a3;font-weight:500">picked</span><span> </span><span style="color:#c0e2a3;font-weight:500">up</span><span>
</span></span><span class=" pr-8"><span>  </span><span style="color:#c0e2a3;font-weight:500">$id:</span><span> </span><span style="color:#c0e2a3;font-weight:500">PlayerItemPickupPayload</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  additionalProperties:</span><span> </span><span style="color:#64a0dc">false</span></span></code></pre></div></div></div></div><p class=" my-4 text-gray-700 font-normal font-sans antialiased">and alter the channel definition for the <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">game server</strong> to:</p><div class=" my-8"><div class="language-yaml rounded relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span><span class="text-gray-600 block pl-2 pr-2">2
</span><span class="text-gray-600 block pl-2 pr-2">3
</span><span class="text-gray-600 block pl-2 pr-2">4
</span><span class="text-gray-600 block pl-2 pr-2">5
</span><span class="text-gray-600 block pl-2 pr-2">6
</span><span class="text-gray-600 block pl-2 pr-2">7
</span><span class="text-gray-600 block pl-2 pr-2">8
</span><span class="text-gray-600 block pl-2 pr-2">9
</span><span class="text-gray-600 block pl-2 pr-2">10
</span><span class="text-gray-600 block pl-2 pr-2">11
</span><span class="text-gray-600 block pl-2 pr-2">12
</span><span class="text-gray-600 block pl-2 pr-2">13
</span><span class="text-gray-600 block pl-2 pr-2">14
</span></code><code class="mr-8"><span class=" pr-8"><span style="color:#c0e2a3;font-weight:500">...</span><span>
</span></span><span class=" pr-8"><span>  </span><span style="color:#c0e2a3;font-weight:500">game/server/{serverId}/events/player/{playerId}/item/{itemId}/pickup:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    description:</span><span> </span><span style="color:#c0e2a3;font-weight:500">Channel</span><span> </span><span style="color:#c0e2a3;font-weight:500">used</span><span> </span><span style="color:#c0e2a3;font-weight:500">when</span><span> </span><span style="color:#c0e2a3;font-weight:500">a</span><span> </span><span style="color:#c0e2a3;font-weight:500">player</span><span> </span><span style="color:#c0e2a3;font-weight:500">picks</span><span> </span><span style="color:#c0e2a3;font-weight:500">up</span><span> </span><span style="color:#c0e2a3;font-weight:500">an</span><span> </span><span style="color:#c0e2a3;font-weight:500">item</span><span> </span><span style="color:#c0e2a3;font-weight:500">in-game</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    parameters:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      serverId:</span><span> 
</span></span><span class=" pr-8"><span>        </span><span style="color:#c0e2a3;font-weight:500">$ref:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&quot;./components/Parameters.yaml#/serverId&quot;</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      playerId:</span><span> 
</span></span><span class=" pr-8"><span>        </span><span style="color:#c0e2a3;font-weight:500">$ref:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&quot;./components/Parameters.yaml#/playerId&quot;</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      itemId:</span><span> 
</span></span><span class=" pr-8"><span>        </span><span style="color:#c0e2a3;font-weight:500">$ref:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&quot;./components/Parameters.yaml#/itemId&quot;</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    subscribe:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      message:</span><span>
</span></span><span class=" pr-8"><span>        </span><span style="color:#c0e2a3;font-weight:500">$ref:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&#x27;./components/messages/PlayerItemPickup.yaml&#x27;</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#c0e2a3;font-weight:500">...</span></span></code></pre></div></div></div></div><p class=" my-4 text-gray-700 font-normal font-sans antialiased">These changes are applied to the <strong class=" my-4 text-gray-700 font-semibold font-sans antialiased">processor</strong> as well. You can find all the AsyncAPI files <a href="https://github.com/jonaslagoni/asyncapi-miniseries/tree/master/AsyncAPI" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">here</a>.</p><h1 id="whats-next" class=" my-4 font-sans antialiased font-medium text-2xl">What&#x27;s next</h1><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Now, that the APIs are designed for two applications, we can move on to the fun part, implementing the applications using code generation.</p><h1 id="related-issues" class=" my-4 font-sans antialiased font-medium text-2xl">Related issues</h1><p class=" my-4 text-gray-700 font-normal font-sans antialiased">If you are interested in jumping into our discussions and being part of the community that drives the specification and tools, I have referenced some of the outstanding issues and discussions related to the different aspects I have referenced in the post.</p><ol class=" my-4 ml-4 list-decimal text-gray-700 font-normal font-sans antialiased"><li class=" my-3 text-gray-700 font-normal font-sans antialiased"><a href="https://github.com/asyncapi/spec/issues/390" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">Add a View property to the info section to change the perspective of subscribe and publish operations</a> <a name="view-property" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased"></a></li><li class=" my-3 text-gray-700 font-normal font-sans antialiased"><a href="https://github.com/asyncapi/spec/issues/415" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">Reusing channel definitions across files is hard</a> <a name="channel-reusability" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased"></a></li><li class=" my-3 text-gray-700 font-normal font-sans antialiased"><a href="https://github.com/asyncapi/spec/issues/520" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">Confusions with the Publish and Subscribe meaning/perspective</a> <a name="clarify-view" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased"></a></li></ol><blockquote class=" italic font-sans antialiased text-gray-400 border-l-4 border-gray-400 pl-4 pt-1 pb-1 pr-1 my-4 bg-white"><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Cover photo by <a href="https://www.pexels.com/@david-jakab-283330?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">David Jakab</a> from <a href="https://www.pexels.com/photo/galleon-ship-photo-under-the-cloudy-sky-1050656/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">Pexels</a></p></blockquote></article></main></div><div class="bg-white mt-12"><div class="bg-primary-900 py-12"><div class="max-w-screen-xl block   px-4 sm:px-6 lg:px-8 mx-auto block   px-4 sm:px-6 lg:px-8"><div class="p-8"><h3 class="text-primary-200 text-lg font-bold">Subscribe to our newsletter to receive news about AsyncAPI.</h3><p class="text-gray-400 mt-2 text-sm">We respect your inbox. No spam, promise âï¸</p><form class="mt-4 md:flex" data-netlify="true"><input type="hidden" name="form-name" value="form 2"/><input type="hidden" name="type"/><input type="text" name="name" placeholder="Your name" class="form-input block w-full sm:text-sm sm:leading-5 md:mr-2 md:mt-0 md:flex-1" required=""/><input type="email" name="email" placeholder="Your email" class="form-input block w-full mt-2 sm:text-sm sm:leading-5 md:mr-2 md:mt-0 md:flex-1" required=""/><button type="submit" class="bg-primary-500 hover:bg-primary-400 text-white hover:text-white shadow-md hover:shadow-lg transition-all duration-500 ease-in-out rounded px-4 py-3 text-white w-full mt-2 md:mr-2 md:mt-0 md:flex-1"><span class="inline-block">Subscribe</span></button></form></div></div></div><div class="max-w-screen-xl mx-auto py-12 px-4 overflow-hidden sm:px-6 lg:px-8"><nav class="-mx-5 -my-2 flex flex-wrap justify-center"><div class="px-5 py-2"><a href="/about" class="text-base leading-6 text-gray-500 hover:text-gray-900">About</a></div><div class="px-5 py-2"><a href="/blog" class="text-base leading-6 text-gray-500 hover:text-gray-900">Blog</a></div><div class="px-5 py-2"><a href="https://asyncapi.threadless.com" target="_blank" class="text-base leading-6 text-gray-500 hover:text-gray-900">Shop</a></div><div class="px-5 py-2"><a href="/jobs" class="text-base leading-6 text-gray-500 hover:text-gray-900">Jobs</a></div><div class="px-5 py-2"><a href="mailto:press@asyncapi.io" class="text-base leading-6 text-gray-500 hover:text-gray-900">Press</a></div></nav><div class="mt-8 flex justify-center"><a href="https://twitter.com/AsyncAPISpec" target="_blank" class="text-gray-400 hover:text-blue-500"><span class="sr-only">Twitter</span><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"></path></svg></a><a href="https://github.com/asyncapi" target="_blank" class="ml-6 text-gray-400 hover:text-gray-500"><span class="sr-only">GitHub</span><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"></path></svg></a><a href="https://linkedin.com/company/asyncapi" target="_blank" class="ml-6 text-gray-400 hover:text-blue-500"><span class="sr-only">LinkedIn</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 22" enable-background="new 0 0 21 22" fill="currentColor" class="h-6 w-6"><path d="M5,3c0,1.1-0.7,2-2,2C1.8,5,1,4.1,1,3.1C1,2,1.8,1,3,1S5,1.9,5,3z M1,19h4V6H1V19z M14.6,6.2c-2.1,0-3.3,1.2-3.8,2h-0.1 l-0.2-1.7H6.9C6.9,7.6,7,8.9,7,10.4V19h4v-7.1c0-0.4,0-0.7,0.1-1c0.3-0.7,0.8-1.6,1.9-1.6c1.4,0,2,1.2,2,2.8V19h4v-7.4 C19,7.9,17.1,6.2,14.6,6.2z"></path></svg></a><a href="https://youtube.com/asyncapi" target="_blank" class="ml-6 text-gray-400 hover:text-red-600"><span class="sr-only">YouTube</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-6 w-6"><path d="M10,2.3C0.172,2.3,0,3.174,0,10s0.172,7.7,10,7.7s10-0.874,10-7.7S19.828,2.3,10,2.3z M13.205,10.334l-4.49,2.096 C8.322,12.612,8,12.408,8,11.974V8.026C8,7.593,8.322,7.388,8.715,7.57l4.49,2.096C13.598,9.85,13.598,10.15,13.205,10.334z"></path></svg></a></div><div class="mt-8"><p class="text-center text-base leading-6 text-gray-400">Made with <span class="font-mono text-pink-500">:love:</span> by the AsyncAPI Initiative.</p><p class="text-center text-base leading-6 text-gray-400 mt-4"><a href="https://netlify.com" target="_blank"><img src="https://www.netlify.com/img/global/badges/netlify-color-bg.svg" class="inline"/></a></p><p class="text-center text-base leading-6 text-gray-400 mt-4">Copyright Â© AsyncAPI Project a Series of LF Projects, LLC.</p><p class="text-center text-base leading-6 text-gray-400 mt-1">For web site terms of use, trademark policy and general project policies please see <a href="https://lfprojects.org" class="text-gray-700 underline" target="_blank">https://lfprojects.org</a></p></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/blog/designing_your_apis_with_asyncapi_part_1","query":{},"buildId":"Tex625tf_lnUaoCgL3YGh","nextExport":true,"autoExport":true,"isFallback":false}</script><script nomodule="" src="/_next/static/runtime/polyfills-9a3984dd490beb07be5c.js"></script><script async="" data-next-page="/_app" src="/_next/static/Tex625tf_lnUaoCgL3YGh/pages/_app.js"></script><script async="" data-next-page="/blog/designing_your_apis_with_asyncapi_part_1" src="/_next/static/Tex625tf_lnUaoCgL3YGh/pages/blog/designing_your_apis_with_asyncapi_part_1.js"></script><script src="/_next/static/runtime/webpack-c212667a5f965e81e004.js" async=""></script><script src="/_next/static/chunks/framework.4dd1003cc9c949c7fcd3.js" async=""></script><script src="/_next/static/chunks/75fc9c18.3cfc8ccb85c1d7a11215.js" async=""></script><script src="/_next/static/chunks/ce56b752.ae226c74e10a6a4b10b8.js" async=""></script><script src="/_next/static/chunks/0557f841fc85a2834d7f888fce8afe60a4489f1d.c7c389ed4e650b7acdd9.js" async=""></script><script src="/_next/static/chunks/5d64a570782c3ceba4f83b61f6533a7ee91bc9f8.3990439058315e1f2df7.js" async=""></script><script src="/_next/static/chunks/be6d319af1fb18412639ef154d1e4d762d2a273e.4cb9699241b781436ae4.js" async=""></script><script src="/_next/static/chunks/4f5700c3a68d16ffc40162e6214bdf91e1aeaf40.af98a8a489a62e744487.js" async=""></script><script src="/_next/static/runtime/main-9425739e3a9a3f3edaa6.js" async=""></script><script src="/_next/static/Tex625tf_lnUaoCgL3YGh/_buildManifest.js" async=""></script><script src="/_next/static/Tex625tf_lnUaoCgL3YGh/_ssgManifest.js" async=""></script></body></html>