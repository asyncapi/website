<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="description" content="Code generation is no simple feat. There are a lot of complexities when it comes to generating useful application code. In this post, I am going to walk you through generating your own microservices u"/><link rel="alternate" type="application/rss+xml" title="RSS Feed for AsyncAPI Initiative Blog" href="/rss.xml"/><link rel="icon" href="/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="194x194" href="/favicon-194x194.png"/><meta itemProp="name" content="AsyncAPI Code Generation: Microservices Using Spring Cloud Stream | AsyncAPI Initiative for event-driven APIs"/><meta itemProp="description" content="Code generation is no simple feat. There are a lot of complexities when it comes to generating useful application code. In this post, I am going to walk you through generating your own microservices u"/><meta itemProp="image" content="http://localhost:8080/img/posts/asyncapi-codegen_pic-00.webp"/><meta name="twitter:card" value="summary_large_image"/><meta name="twitter:title" content="AsyncAPI Code Generation: Microservices Using Spring Cloud Stream | AsyncAPI Initiative for event-driven APIs"/><meta name="twitter:description" content="Code generation is no simple feat. There are a lot of complexities when it comes to generating useful application code. In this post, I am going to walk you through generating your own microservices u"/><meta name="twitter:image" content="http://localhost:8080/img/posts/asyncapi-codegen_pic-00.webp"/><meta property="og:title" content="AsyncAPI Code Generation: Microservices Using Spring Cloud Stream | AsyncAPI Initiative for event-driven APIs"/><meta property="og:type" content="article"/><meta property="og:url" content="http://localhost:8080/blog/asyncapi_codegen_scst"/><meta property="og:image" content="http://localhost:8080/img/posts/asyncapi-codegen_pic-00.webp"/><meta property="og:description" content="Code generation is no simple feat. There are a lot of complexities when it comes to generating useful application code. In this post, I am going to walk you through generating your own microservices u"/><title>AsyncAPI Code Generation: Microservices Using Spring Cloud Stream | AsyncAPI Initiative for event-driven APIs</title><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5cb852c7b57ed596" async=""></script><style>
                /* AddThis hack */

                #at4-share {
                    left: 50%;
                    margin-left: -500px !important;

                    &amp;amp;.addthis-animated {
                      animation-duration: 0s !important;
                    }
                }

                #at4-scc {
                    display: none !important;
                }
              </style><meta name="next-head-count" content="25"/><link rel="preload" href="/_next/static/css/cedf33f8fb65848f9ac5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cedf33f8fb65848f9ac5.css"/><link rel="preload" href="/_next/static/css/99208ff840280a9dc815.css" as="style"/><link rel="stylesheet" href="/_next/static/css/99208ff840280a9dc815.css"/><link rel="preload" href="/_next/static/Tex625tf_lnUaoCgL3YGh/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/Tex625tf_lnUaoCgL3YGh/pages/blog/asyncapi_codegen_scst.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-c212667a5f965e81e004.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.4dd1003cc9c949c7fcd3.js" as="script"/><link rel="preload" href="/_next/static/chunks/75fc9c18.3cfc8ccb85c1d7a11215.js" as="script"/><link rel="preload" href="/_next/static/chunks/ce56b752.ae226c74e10a6a4b10b8.js" as="script"/><link rel="preload" href="/_next/static/chunks/0557f841fc85a2834d7f888fce8afe60a4489f1d.c7c389ed4e650b7acdd9.js" as="script"/><link rel="preload" href="/_next/static/chunks/5d64a570782c3ceba4f83b61f6533a7ee91bc9f8.3990439058315e1f2df7.js" as="script"/><link rel="preload" href="/_next/static/chunks/be6d319af1fb18412639ef154d1e4d762d2a273e.4cb9699241b781436ae4.js" as="script"/><link rel="preload" href="/_next/static/chunks/4f5700c3a68d16ffc40162e6214bdf91e1aeaf40.af98a8a489a62e744487.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-9425739e3a9a3f3edaa6.js" as="script"/></head><body><div id="__next"><div class="max-w-4xl block   px-4 sm:px-6 lg:px-8 mx-auto block   px-4 sm:px-6 lg:px-8"><div class="relative bg-white  z-50"><div class="flex w-full justify-between items-center py-6 lg:justify-start lg:space-x-10"><div class="lg:w-auto lg:flex-1"><a href="/" class="flex"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 535.016 126.327" xml:space="preserve" class="h-8 w-auto sm:h-8"><g fill="#1D1D1B"><path d="M154.912 21.665h10.54l24.425 71.451h-8.713l-5.678-17.129h-30.402l-5.677 17.129h-8.816l24.321-71.451zm18.343 46.821l-12.87-38.917-13.173 38.917h26.043zM202.901 92.709c-3.212-1.555-5.796-3.699-7.752-6.436-1.964-2.736-3.042-5.861-3.245-9.375l7.5-1.723c.134 2.568.844 4.832 2.128 6.791 1.281 1.961 3.005 3.445 5.168 4.459 2.162 1.012 4.561 1.52 7.196 1.52 2.295 0 4.357-.336 6.183-1.014 1.822-.674 3.292-1.672 4.408-2.99 1.116-1.318 1.671-2.752 1.671-4.307 0-1.756-.606-3.191-1.822-4.309-1.219-1.113-2.706-1.99-4.46-2.633-1.757-.643-4.054-1.334-6.893-2.08-3.92-1.012-7.11-2.025-9.578-3.037-2.464-1.015-4.544-2.517-6.232-4.511-1.691-1.993-2.533-4.612-2.533-7.854 0-2.838.76-5.423 2.281-7.753 1.519-2.33 3.579-4.156 6.18-5.473 2.602-1.317 5.525-1.976 8.769-1.976 3.176 0 6.116.659 8.818 1.976 2.699 1.317 4.898 3.127 6.585 5.422 1.688 2.298 2.672 4.864 2.94 7.704l-7.5 1.924c-.136-3.105-1.232-5.555-3.294-7.348-2.062-1.787-4.646-2.684-7.752-2.684-1.757 0-3.361.337-4.816 1.012-1.452.675-2.599 1.621-3.444 2.838a6.952 6.952 0 00-1.267 4.054c0 1.758.609 3.192 1.825 4.306 1.216 1.114 2.448 1.926 3.701 2.432 1.249.508 3.831 1.202 7.75 2.08 3.717 1.013 6.842 2.093 9.375 3.241 2.534 1.151 4.646 2.704 6.333 4.663 1.688 1.961 2.535 4.393 2.535 7.297 0 3.041-.88 5.795-2.635 8.26-1.758 2.467-4.14 4.393-7.145 5.777-3.009 1.385-6.402 2.078-10.188 2.078-3.985.001-7.582-.776-10.79-2.331zM246.73 116.322a25.078 25.078 0 01-8.359-5.777 26.296 26.296 0 01-5.524-8.613l6.486-4.357c1.147 4.119 3.277 7.447 6.384 9.98s6.722 3.803 10.845 3.803c3.176 0 5.963-.795 8.359-2.383 2.399-1.588 4.292-3.75 5.678-6.486 1.385-2.734 2.078-5.828 2.078-9.271l-.102-6.893c-.947 1.689-2.197 3.191-3.749 4.51a18.41 18.41 0 01-5.17 3.09c-1.893.744-3.816 1.117-5.776 1.117-3.513 0-6.638-.863-9.375-2.584-2.737-1.723-4.849-4.088-6.333-7.096-1.488-3.006-2.229-6.469-2.229-10.389V41.934h7.702v33.039c0 2.57.472 4.814 1.419 6.74.943 1.926 2.295 3.463 4.052 4.611 1.754 1.15 3.784 1.723 6.081 1.723 2.497 0 4.762-.609 6.791-1.824 2.025-1.217 3.632-2.887 4.812-5.016 1.184-2.129 1.775-4.545 1.775-7.246V41.934h7.701l.102 51.283c0 4.797-1.012 9.102-3.041 12.92-2.025 3.816-4.831 6.807-8.411 8.969-3.583 2.162-7.602 3.244-12.059 3.244-3.584 0-6.961-.676-10.137-2.028zM290.513 41.934h6.994l.708 6.791c1.419-2.635 3.479-4.746 6.185-6.335 2.7-1.584 5.538-2.381 8.511-2.381 3.514 0 6.639.88 9.375 2.635 2.737 1.759 4.865 4.14 6.385 7.145 1.521 3.009 2.281 6.437 2.281 10.288v33.04h-7.804v-33.04c0-2.499-.457-4.728-1.37-6.689-.911-1.958-2.263-3.497-4.054-4.611-1.79-1.114-3.833-1.673-6.131-1.673-2.432 0-4.66.61-6.688 1.826-2.025 1.216-3.648 2.887-4.864 5.016-1.216 2.128-1.825 4.544-1.825 7.246v31.925h-7.702V41.934zM350 91.492c-3.646-2.365-6.483-5.623-8.511-9.779s-3.009-8.869-2.94-14.137c0-5.337.93-10.084 2.788-14.241 1.858-4.155 4.475-7.413 7.854-9.779 3.377-2.365 7.262-3.548 11.655-3.548 3.378 0 6.486.746 9.323 2.23a21.238 21.238 0 017.146 6.03c1.923 2.533 3.255 5.489 4.003 8.867l-7.4 2.027c-.946-3.714-2.585-6.689-4.915-8.917-2.33-2.23-5.084-3.345-8.26-3.345-2.701 0-5.169.878-7.397 2.635s-3.969 4.207-5.219 7.346c-1.251 3.143-1.877 6.708-1.877 10.694 0 3.986.693 7.535 2.08 10.639 1.383 3.109 3.31 5.559 5.776 7.35 2.466 1.791 5.254 2.686 8.36 2.686 2.7 0 5.15-.641 7.346-1.926 2.196-1.283 3.989-3.074 5.372-5.371 1.387-2.297 2.283-4.898 2.686-7.805l7.4 1.623c-.542 3.918-1.876 7.414-4.003 10.488-2.131 3.074-4.816 5.475-8.058 7.197-3.243 1.721-6.827 2.584-10.743 2.584-4.66.001-8.815-1.183-12.466-3.548zM412.529 21.36h15.001l24.426 71.755h-12.67l-4.966-15.912h-28.375l-5.27 15.912h-12.468l24.322-71.755zm19.055 46.013l-11.453-35.27-11.652 35.27h23.105zM458.743 21.36h28.176c4.797 0 9.087.949 12.87 2.84 3.782 1.891 6.773 4.526 8.969 7.903 2.196 3.379 3.296 7.232 3.296 11.555 0 4.324-1.082 8.157-3.245 11.503-2.163 3.343-5.152 5.996-8.969 7.955-3.816 1.96-8.092 2.939-12.822 2.939h-16.416v27.06h-11.858V21.36zm26.859 34.56c2.635 0 5.049-.523 7.246-1.572 2.194-1.045 3.918-2.497 5.167-4.357 1.252-1.856 1.876-3.969 1.876-6.333s-.607-4.475-1.823-6.335c-1.218-1.856-2.905-3.31-5.068-4.357-2.162-1.047-4.628-1.572-7.397-1.572h-15V55.92h14.999zM519.855 21.36h12.16v71.755h-12.16V21.36z"></path></g><path fill="#4775B9" d="M46.5 121.416c-23.583 0-42.768-14.301-42.768-31.879h8.469c0 12.908 15.387 23.408 34.299 23.408s34.299-10.5 34.299-23.408h8.469c.001 17.578-19.183 31.879-42.768 31.879zM89.269 33.878H80.8c0-12.906-15.387-23.407-34.299-23.407s-34.299 10.5-34.299 23.407h-8.47C3.732 16.3 22.918 2 46.5 2c23.585 0 42.769 14.3 42.769 31.878z"></path><path fill="#63BA90" d="M6.715 57.486H61.114999999999995V65.955H6.715z" transform="rotate(35.914 33.912 61.719)"></path><path fill="#63BA90" d="M32.225 57.438H86.625V65.906H32.225z" transform="rotate(35.914 59.422 61.671)"></path></svg></a></div><div class="-mr-2 -my-2 lg:hidden"><button type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-150 ease-in-out"><svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button></div><nav class="hidden lg:flex space-x-10"><div class="relative"><button type="button" class=" group text-gray-500 inline-flex items-center space-x-2 text-base leading-6 font-medium hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150"><span>Learning</span><svg class="text-gray-400 h-5 w-5 group-hover:text-gray-500 group-focus:text-gray-500 transition ease-in-out duration-150" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="relative"><button type="button" class=" group text-gray-500 inline-flex items-center space-x-2 text-base leading-6 font-medium hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150"><span>Tools</span><svg class="text-gray-400 h-5 w-5 group-hover:text-gray-500 group-focus:text-gray-500 transition ease-in-out duration-150" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="relative"><button type="button" class=" group text-gray-500 inline-flex items-center space-x-2 text-base leading-6 font-medium hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150"><span>Community</span><svg class="text-gray-400 h-5 w-5 group-hover:text-gray-500 group-focus:text-gray-500 transition ease-in-out duration-150" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><a href="/blog" target="_self" class=" text-base leading-6 font-medium text-gray-500 hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150">Blog</a><a href="/roadmap" target="_self" class="text-green-400 font-bold text-base leading-6 font-medium text-gray-500 hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150">Roadmap</a><a href="/jobs" target="_self" class="text-primary-500 font-bold text-base leading-6 font-medium text-gray-500 hover:text-gray-900 focus:outline-none focus:text-gray-900 transition ease-in-out duration-150">Jobs</a></nav><div class="hidden lg:flex lg:flex-1"></div></div></div></div><div class="max-w-4xl lg:flex lg:flex-row-reverse  px-4 sm:px-6 lg:px-8 mx-auto lg:flex lg:flex-row-reverse  px-4 sm:px-6 lg:px-8"><div class="bg-blue-100 mt-4 p-4 sticky top-0 overflow-y-auto max-h-screen lg:bg-transparent lg:mt-0 lg:pt-0 lg:pb-8 lg:top-4 lg:max-h-(screen-16) lg:border-l lg:border-gray-200 lg:min-w-40 lg:max-w-64 lg:-mr-20 xl:min-w-72 xl:-mr-36  lg:block z-20"><div class="flex cursor-pointer  lg:cursor-auto"><h5 class="false flex-1 text-primary-500 font-medium uppercase tracking-wide text-sm font-sans antialiased lg:mb-4 lg:text-xs lg:text-gray-500 lg:font-thin">On this page</h5><div class="text-underline text-center p4 lg:hidden"><svg class="rotate-90 transform transition duration-200 ease-in-out h-6 -mt-0.5 text-primary-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></div></div><div class="hidden lg:block"><div class=""><a class="pl-0 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#asyncapi-what-is-it">AsyncAPI: What Is It?</a><a class="pl-0 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#defining-the-application-that-you-want-to-develop-the--asyncapi-document">Defining the Application That You Want to Develop: The  AsyncAPI Document</a><a class="pl-0 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#create-event-driven-microservices-using-spring-cloud-stream-without-learning-messaging-apis">Create Event-Driven Microservices Using Spring Cloud Stream Without Learning Messaging APIs</a><a class="pl-4 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#download-and-run-the-asyncapi-generator">Download and Run the AsyncAPI Generator</a><a class="pl-0 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#add-your-business-logic">Add Your Business Logic</a><a class="pl-0 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#helpful-parameters-and-specification-extensions-for-creating-microservices-using-the-asyncapi-spring-cloud-stream-template">Helpful Parameters and Specification Extensions for Creating Microservices Using the AsyncAPI Spring Cloud Stream Template</a><a class="pl-0 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#tips-for-using-the-code-generator-to-create-event-driven-microservices-using-spring-cloud-stream">Tips For Using The Code Generator To Create Event-Driven Microservices Using Spring Cloud Stream</a><a class="pl-0 block mb-1 transition duration-100 ease-in-out text-gray-500 font-normal text-sm font-sans antialiased hover:text-gray-700 hover:font-medium" href="#conclusion">Conclusion</a></div></div></div><main class="mt-8 px-4 sm:px-6 lg:pr-8 lg:pl-0 lg:flex-1 lg:max-w-172 xl:max-w-172"><header class="pr-4 sm:pr-6 md:pr-8"><h1 class="text-4xl font-normal text-gray-800 font-sans antialiased">AsyncAPI Code Generation: Microservices Using Spring Cloud Stream</h1><div class="mt-6 flex items-center"><div class="relative flex-shrink-0"><a alt="Marc DiPasquale" href="https://twitter.com/mrc0113"><img title="Marc DiPasquale" class="relative mr-0 z-0 h-10 w-10 border-2 border-white rounded-full object-cover hover:z-50" src="/img/avatars/mdipasquale.webp"/></a></div><div class="ml-3"><p class="text-sm leading-5 font-medium text-gray-900"><span class="hover:underline"><a alt="Marc DiPasquale" href="https://twitter.com/mrc0113">Marc DiPasquale</a></span></p><div class="flex text-sm leading-5 text-gray-500"><time dateTime="2020-06-02T05:00:00.000Z">June 2, 2020</time><span class="mx-1">·</span><span>12<!-- --> min read</span></div></div></div></header><article class="mb-32"><img src="/img/posts/asyncapi-codegen_pic-00.webp" class="mt-6 mb-6 w-full"/><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Code generation is no simple feat. There are a lot of complexities when it comes to generating useful application code. In this post, I am going to walk you through generating your own microservices using Spring Cloud Stream and the AsyncAPI Code Generator. These tools should help to simplify things when defining and implementing your asynchronous applications. I explained the same idea in a video you can <a href="https://www.youtube.com/watch?v=QEDL6AqsaJc" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">watch here</a>, and all of the artifacts are <a href="https://github.com/Mrc0113/asyncapi-codegen-scst" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">available in GitHub</a>. </p><blockquote class=" italic font-sans antialiased text-gray-400 border-l-4 border-gray-400 pl-4 pt-1 pb-1 pr-1 my-4 bg-white"><p class=" my-4 text-gray-700 font-normal font-sans antialiased">This post <a href="https://solace.com/blog/asyncapi-codegen-microservices-using-spring-cloud-stream/" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">AsyncAPI Code Generation: Microservices Using Spring Cloud Stream</a> appeared first on <a href="https://solace.com" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">Solace</a>.</p></blockquote><h1 id="asyncapi-what-is-it" class=" my-4 font-sans antialiased font-medium text-2xl">AsyncAPI: What Is It?</h1><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Before we dive into code generation let’s start with the basics – what is AsyncAPI? Over the past few years, <a href="https://www.asyncapi.com/" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">AsyncAPI</a> has emerged as the industry standard for defining asynchronous, event-driven APIs; you can think of it as OpenAPI for the asynchronous world. It is an open source initiative that provides <u>both</u> a specification to describe and document your asynchronous applications in a machine-readable format, and tooling (such as code generators) to make life easier for developers tasked with implementing them.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">I’m not going to go into great detail about the specification, but for context you should know that it defines metadata about your asynchronous API, the channels available for sending/receiving messages, and components – such as schemas – that define the messages that are being exchanged. For more information about the specification you can read about it <a href="https://www.asyncapi.com/docs/specifications/2.0.0/" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">here</a>.</p><h1 id="defining-the-application-that-you-want-to-develop-the--asyncapi-document" class=" my-4 font-sans antialiased font-medium text-2xl">Defining the Application That You Want to Develop: The  AsyncAPI Document</h1><p class=" my-4 text-gray-700 font-normal font-sans antialiased">The first step in doing code generation with AsyncAPI is obtaining an AsyncAPI document that defines the application that you want to develop. Per the specification, this document is represented as JSON objects and must conform to the JSON standards. YAML, being a superset of JSON, can also be used. There are two main ways of going about obtaining this document: manually create the document or use an event portal.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">If you decide to manually create the document after familiarizing yourself with the specification, don’t worry – you won’t be starting with a blank slate. The AsyncAPI initiative has provided a handy, interactive tool called the <a href="https://hub.asyncapi.io/" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">AsyncAPI Hub</a> to make this easier. On the left side of the Hub you can familiarize yourself with the specification and make changes to a real AsyncAPI document, and as you do so the right side of the screen updates to show how the document is parsed into a more human-readable format.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased"><img src="/img/posts/asyncapi-codegen_pic-01.webp" alt="asyncapi playground for creating microservices using spring cloud stream"/></p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">The second way is to use an event portal. Solace PubSub+ Event Portal, for example, allows for architects and developers to collaborate using a GUI to design your event-driven architecture. The team would define the applications that exist in the system, as well as the events that are exchanged and the schemas which define them. Having a catalog of well-organized channels and events for reuse will also save you both time and headaches while collaborating, instead of having to comb through a bunch of files in various locations.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Once the design is in place, PubSub+ Event Portal allows the developer to choose the application they are responsible for developing and download the AsyncAPI document in JSON or YAML.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased"><img src="/img/posts/asyncapi-codegen_pic-02.webp" alt="pic2"/></p><h1 id="create-event-driven-microservices-using-spring-cloud-stream-without-learning-messaging-apis" class=" my-4 font-sans antialiased font-medium text-2xl">Create Event-Driven Microservices Using Spring Cloud Stream Without Learning Messaging APIs</h1><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Now that we have our AsyncAPI document that describes our application it’s time to develop the application. The AsyncAPI <a href="https://github.com/asyncapi/generator" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">Code Generator</a> supports templates to generate code for a variety of different languages and protocols, but for this example we’re going to use the <a href="https://github.com/asyncapi/java-spring-cloud-stream-template" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">Spring Cloud Stream template</a>. One should note that the template generates a Maven project.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">The Spring Cloud Stream framework provides an easy way to get started with event-driven microservices by providing binders that allow the developer to create their microservices without having to learn messaging APIs.</p><h3 id="download-and-run-the-asyncapi-generator" class=" my-4 font-sans antialiased font-medium text-lg">Download and Run the AsyncAPI Generator</h3><p class=" my-4 text-gray-700 font-normal font-sans antialiased">The first step is of course to install the AsyncAPI generator itself. If you have NodeJS installed this takes just one easy <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">npm</code> command as seen below. You can find the required versions in the <a href="https://github.com/asyncapi/generator" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">Code Generator</a> on github.</p><div class=" my-8"><div class="language-bash rounded relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class="absolute top-0 bottom-0 right-0 pl-5 pr-2 bg-code-editor-dark z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-3 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="mr-8"><span class=" pr-8"><span>npm install -g @asyncapi/generator</span></span></code></pre></div></div></div></div><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Once you have the generator installed you can run it using the <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">ag</code> command. At a minimum you must specify the AsyncAPI document to run it against and the template to use as shown below.</p><div class=" my-8"><div class="language-generator-cli rounded relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class="absolute top-0 bottom-0 right-0 pl-5 pr-2 bg-code-editor-dark z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-3 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="mr-8"><span class=" pr-8"><span class="hljs-generator-command">ag</span><span class="hljs-generator-command hljs-asyncapi-file"> https://raw.githubusercontent.com/asyncapi/asyncapi/2.0.0/examples/2.0.0/streetlights.yml</span><span class="hljs-generator-command hljs-asyncapi-file hljs-generator-template"> @asyncapi/java-spring-cloud-stream-template</span></span></code></pre></div></div></div></div><p class=" my-4 text-gray-700 font-normal font-sans antialiased">In most cases you’ll want to take advantage of the parameters and specification extensions that are specified by the template being used. For example, the Spring Cloud Stream template that I’m using in this example allows me to <a href="https://github.com/asyncapi/java-spring-cloud-stream-template#configuration-options" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">configure many options</a>, including the Spring Cloud Stream binder I want to use – for example, the Solace binder.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Other parameters include:</p><ul class=" my-4 ml-4 list-disc text-gray-700 font-normal font-sans antialiased"><li class=" my-3 text-gray-700 font-normal font-sans antialiased">Maven information: <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">artifactId</code> and <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">groupId</code></li><li class=" my-3 text-gray-700 font-normal font-sans antialiased">Java package: <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">javaPackage</code></li><li class=" my-3 text-gray-700 font-normal font-sans antialiased">Broker connection Info: <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">host</code>, <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">username</code>, <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">password</code> and <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">msgVpn</code></li></ul><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Using these options, my <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">ag</code> command might look something like this, where <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">-o</code> specifies the output directory:</p><div class=" my-8"><div class="language-generator-cli rounded relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class="absolute top-0 bottom-0 right-0 pl-5 pr-2 bg-code-editor-dark z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-3 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="mr-8"><span class=" pr-8"><span class="hljs-generator-command">ag </span><span class="hljs-generator-command hljs-generator-param">-o ExpenseIntegration</span><span class="hljs-generator-command"> </span><span class="hljs-generator-command hljs-generator-param">-p binder=solace</span><span class="hljs-generator-command"> </span><span class="hljs-generator-command hljs-generator-param">-p view=provider</span><span class="hljs-generator-command"> </span><span class="hljs-generator-command hljs-generator-param">-p actuator=true</span><span class="hljs-generator-command"> </span><span class="hljs-generator-command hljs-generator-param">-p artifactId=ExpenseIntegration</span><span class="hljs-generator-command"> </span><span class="hljs-generator-command hljs-generator-param">-p groupId=acme.rideshare</span><span class="hljs-generator-command"> </span><span class="hljs-generator-command hljs-generator-param">-p javaPackage=acme.rideshare.expense</span><span class="hljs-generator-command"> </span><span class="hljs-generator-command hljs-generator-param">-p host=localhost:55555</span><span class="hljs-generator-command"> </span><span class="hljs-generator-command hljs-generator-param">-p username=default</span><span class="hljs-generator-command"> </span><span class="hljs-generator-command hljs-generator-param">-p password=default</span><span class="hljs-generator-command"> </span><span class="hljs-generator-command hljs-generator-param">-p msgVpn=default</span><span class="hljs-generator-command hljs-asyncapi-file"> ~/Downloads/ExpenseIntegration.yaml</span><span class="hljs-generator-command hljs-asyncapi-file hljs-generator-template"> @asyncapi/java-spring-cloud-stream-template</span></span></code></pre></div></div></div></div><p class=" my-4 text-gray-700 font-normal font-sans antialiased">After running, the output will look something like this:<br/>
<img src="/img/posts/asyncapi-codegen_pic-03.webp" alt="pic3"/></p><h1 id="add-your-business-logic" class=" my-4 font-sans antialiased font-medium text-2xl">Add Your Business Logic</h1><p class=" my-4 text-gray-700 font-normal font-sans antialiased">At this point the generator has created an <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">ExpenseIntegration</code> directory that contains the Maven project. We can use the IDE of choice and import the Maven project to add business logic.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">As seen in the image below, once imported, the project looks like a regular Spring Boot Java project with generated classes under the <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">javaPackage</code> that was defined earlier and an <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">application.yml</code> file for configuration. Generated classes under <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">javaPackage</code> include Plain Old Java Objects (POJOs) defined from the schemas in the AsyncAPI document and <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">Application.java</code> which contains the actual Spring Cloud Functions where we’ll add our business logic.<br/>
<img src="/img/posts/asyncapi-codegen_pic-04.webp" alt="pic4"/></p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">The generated POJOs, like <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">RideReceipt</code> in the image above, define your data model per the schemas included in the AsyncAPI document. These POJOs contains variables with getters and setters for each attribute defined to allow both for developers to get coding quickly without having to manually create the objects themselves, but also for Spring Cloud Stream to automatically convert messages directly to POJOs.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Then we have the <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">Application.java</code> class, which can be renamed using the <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">javaClass</code> parameter. The generator will add functions to handle messages delivered on the channels defined in the AsyncAPI document <a href="https://github.com/asyncapi/java-spring-cloud-stream-template#how-it-works" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">as described in the template</a>.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">In the example below we can see a single <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">java.util.function.Consumer</code> bean since our AsyncAPI document describes our application as a subscriber to messages whose payload is defined by the <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">RideReceipt</code> schema. Note the comment that states // Add business logic here; this is where the developer can add their business logic.</p><div class=" my-8"><div class="language-java rounded relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span><span class="text-gray-600 block pl-2 pr-2">2
</span><span class="text-gray-600 block pl-2 pr-2">3
</span><span class="text-gray-600 block pl-2 pr-2">4
</span><span class="text-gray-600 block pl-2 pr-2">5
</span><span class="text-gray-600 block pl-2 pr-2">6
</span><span class="text-gray-600 block pl-2 pr-2">7
</span><span class="text-gray-600 block pl-2 pr-2">8
</span><span class="text-gray-600 block pl-2 pr-2">9
</span><span class="text-gray-600 block pl-2 pr-2">10
</span><span class="text-gray-600 block pl-2 pr-2">11
</span><span class="text-gray-600 block pl-2 pr-2">12
</span><span class="text-gray-600 block pl-2 pr-2">13
</span></code><code class="mr-8"><span class=" pr-8"><span style="color:#5E81AC">@SpringBootApplication</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#64a0dc">public</span><span> </span><span style="color:#64a0dc">class</span><span style="color:#7edcda"> </span><span style="color:#7edcda">Application</span><span style="color:#7edcda"> </span><span>{
</span></span><span class=" pr-8"><span>   </span><span style="color:#64a0dc">private</span><span> </span><span style="color:#64a0dc">static</span><span> </span><span style="color:#64a0dc">final</span><span> Logger logger = LoggerFactory.getLogger(Application.class);
</span></span><span class=" pr-8"><span>   </span><span style="color:#64a0dc">public</span><span style="color:#74e287"> </span><span style="color:#64a0dc">static</span><span style="color:#74e287"> </span><span style="color:#64a0dc">void</span><span style="color:#74e287"> </span><span style="color:#7edcda">main</span><span style="color:#d6deeb">(String[] args)</span><span style="color:#74e287"> </span><span>{
</span></span><span class=" pr-8">      SpringApplication.run(Application.class);
</span><span class=" pr-8">   }
</span><span class=" pr-8">
</span><span class=" pr-8"><span>   </span><span style="color:#5E81AC">@Bean</span><span>
</span></span><span class=" pr-8"><span>   </span><span style="color:#64a0dc">public</span><span style="color:#74e287"> Consumer&lt;RideReceipt&gt; </span><span style="color:#7edcda">acmeRideshareBillingReceiptCreated001Consumer</span><span style="color:#d6deeb">()</span><span style="color:#74e287"> </span><span>{
</span></span><span class=" pr-8"><span>      </span><span style="color:#797f8c">// Add business logic here.</span><span>
</span></span><span class=" pr-8"><span>      </span><span style="color:#64a0dc">return</span><span> </span><span style="color:#64a0dc">null</span><span>;
</span></span><span class=" pr-8">   }
</span><span class=" pr-8">}
</span></code></pre></div></div></div></div><p class=" my-4 text-gray-700 font-normal font-sans antialiased">You might say: “Marc, that’s great, but how the heck is that function actually binding to the messaging channels!?” This is where the <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">application.yml</code> file comes into play.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">The generated <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">application.yml</code> file defines several things as specified in the AsyncAPI document or from the parameters passed into the generator. First, it defines the list of functions it wants Spring Cloud Stream aware of under <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">spring.cloud.stream.function.definition</code>. Second, it tells Spring Cloud Stream which channels to bind those functions to under <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">spring.cloud.streams.bindings</code>. Lastly, it contains connection information to the messaging system. The connection info is specified by different parameters depending on the binder you choose but, in this case, it’s defined under <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">solace.java</code>.</p><div class=" my-8"><div class="language-yaml rounded relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span><span class="text-gray-600 block pl-2 pr-2">2
</span><span class="text-gray-600 block pl-2 pr-2">3
</span><span class="text-gray-600 block pl-2 pr-2">4
</span><span class="text-gray-600 block pl-2 pr-2">5
</span><span class="text-gray-600 block pl-2 pr-2">6
</span><span class="text-gray-600 block pl-2 pr-2">7
</span><span class="text-gray-600 block pl-2 pr-2">8
</span><span class="text-gray-600 block pl-2 pr-2">9
</span><span class="text-gray-600 block pl-2 pr-2">10
</span><span class="text-gray-600 block pl-2 pr-2">11
</span><span class="text-gray-600 block pl-2 pr-2">12
</span><span class="text-gray-600 block pl-2 pr-2">13
</span><span class="text-gray-600 block pl-2 pr-2">14
</span><span class="text-gray-600 block pl-2 pr-2">15
</span><span class="text-gray-600 block pl-2 pr-2">16
</span><span class="text-gray-600 block pl-2 pr-2">17
</span><span class="text-gray-600 block pl-2 pr-2">18
</span><span class="text-gray-600 block pl-2 pr-2">19
</span><span class="text-gray-600 block pl-2 pr-2">20
</span><span class="text-gray-600 block pl-2 pr-2">21
</span></code><code class="mr-8"><span class=" pr-8"><span style="color:#7edcda">spring:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  cloud:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    stream:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      function:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">        definition:</span><span> </span><span style="color:#c0e2a3;font-weight:500">acmeRideshareBillingReceiptCreated001Consumer</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    bindings:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      acmeRideshareBillingReceiptCreated001Consumer-in-0:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">        destination:</span><span> </span><span style="color:#c0e2a3;font-weight:500">acme/rideshare/billing/receipt/created/0.0.1</span><span>
</span></span><span class=" pr-8">
</span><span class=" pr-8"><span></span><span style="color:#7edcda">solace:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  java:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    host:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&#x27;localhost:55555&#x27;</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    msgVpn:</span><span> </span><span style="color:#c0e2a3;font-weight:500">default</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    clientUsername:</span><span> </span><span style="color:#c0e2a3;font-weight:500">default</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    clientPassword:</span><span> </span><span style="color:#c0e2a3;font-weight:500">default</span><span>
</span></span><span class=" pr-8">
</span><span class=" pr-8"><span></span><span style="color:#7edcda">logging:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  level:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    root:</span><span> </span><span style="color:#c0e2a3;font-weight:500">info</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    org:</span><span> 
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      springframework:</span><span> </span><span style="color:#c0e2a3;font-weight:500">info</span></span></code></pre></div></div></div></div><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Note that all of this was done for the developer so they didn’t have to track down which SCSt parameters needed to be set, map the functions to the bindings, etc. They just have to add their business logic in place of the project and hit run! In this case since it’s a Spring Boot project you can “run as a Spring Boot app” in your IDE or even run from the command line using <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">mvn spring-boot:run</code>.</p><h1 id="helpful-parameters-and-specification-extensions-for-creating-microservices-using-the-asyncapi-spring-cloud-stream-template" class=" my-4 font-sans antialiased font-medium text-2xl">Helpful Parameters and Specification Extensions for Creating Microservices Using the AsyncAPI Spring Cloud Stream Template</h1><p class=" my-4 text-gray-700 font-normal font-sans antialiased">As I mentioned, there are a lot of complexities when it comes to generating useful application code from a microservice. Because of these complexities, I thought I’d call out some tips, tricks, and painpoints of using the AsyncAPI Spring Cloud Stream template.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">There are a bunch of different parameters and specification extensions that you should consider when generating your code. All of them can be found <a href="https://github.com/asyncapi/java-spring-cloud-stream-template#configuration-options" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">here</a>, but I’ll go over a few of the parameters that I use quite often:</p><ul class=" my-4 ml-4 list-disc text-gray-700 font-normal font-sans antialiased"><li class=" my-3 text-gray-700 font-normal font-sans antialiased">The <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">binder</code> parameter allows you to specify the Spring Cloud Stream binder that you’d like to use. Currently the generator supports <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">kafka</code>, <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">rabbit</code> and <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">solace</code>.</li><li class=" my-3 text-gray-700 font-normal font-sans antialiased">The <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">info.x-view</code> specification extension can be set at the info level in your AsyncAPI document. This extension allows for you to define how the document should be viewed from an application perspective. By default an AsyncAPI specification takes a <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">client</code> view where operations (publish/subscribe) defined in a document represent what an application accepts (or how you would communicate with that application). However, for code generation you may want to  generate what an application actually does. This is where setting the <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">view</code> parameter comes in. If you set <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">view</code> to a value of <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">provider</code>  the operations defined in the document will be treated as what an application actually does. Note that this extension can also be set using the <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">view</code> parameter on some generator templates, such as the Java Spring Cloud Stream one. </li><li class=" my-3 text-gray-700 font-normal font-sans antialiased">The <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">operation.x-scs-function-name</code> specification extension can be set on your <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">publish</code> or <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">subscribe</code> operations in the AsyncAPI document, allowing you not only to name the generated function, but also tie two operations together to form a function that subscribes to one channel and publishes to another when the same name is used. For example, if your AsyncAPI document looked like the image below a <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">java.util.function.Function</code> bean called “calculatePercentage” would be generated which subscribes to the input channel and publishes to the output channel.</li></ul><div class=" my-8"><div class="language-yaml rounded relative max-w-full rounded overflow-y-hidden overflow-x-auto py-2 bg-code-editor-dark z-10"><div class=" z-10"><button class="absolute bg-code-editor-dark z-50 text-xs text-gray-500 right-2 top-1 cursor-pointer hover:text-gray-300 focus:outline-none" title="Copy to clipboard"><span class="inline-block pt-1"><svg class="inline-block w-4 h-4 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M15.6 2l-1.2 3H5.6L4.4 2C3.629 2 3 2.629 3 3.4v15.2c0 .77.629 1.4 1.399 1.4h11.2c.77 0 1.4-.631 1.4-1.4V3.4C17 2.629 16.369 2 15.6 2zm-2 2l.9-2h-2.181L11.6 0H8.4l-.72 2H5.5l.899 2H13.6z"></path></svg></span></button></div><div><div class="pr-8 relative overflow-y-auto"><pre class="pt-px pb-0 text-sm font-medium font-ligatures-contextual ml-0 text-xs" style="display:inline-block;background:#252f3f;color:#d6deeb"><code class="pl-2 float-left left-0 sticky bg-code-editor-dark"><span class="text-gray-600 block pl-2 pr-2">1
</span><span class="text-gray-600 block pl-2 pr-2">2
</span><span class="text-gray-600 block pl-2 pr-2">3
</span><span class="text-gray-600 block pl-2 pr-2">4
</span><span class="text-gray-600 block pl-2 pr-2">5
</span><span class="text-gray-600 block pl-2 pr-2">6
</span><span class="text-gray-600 block pl-2 pr-2">7
</span><span class="text-gray-600 block pl-2 pr-2">8
</span><span class="text-gray-600 block pl-2 pr-2">9
</span><span class="text-gray-600 block pl-2 pr-2">10
</span><span class="text-gray-600 block pl-2 pr-2">11
</span></code><code class="mr-8"><span class=" pr-8"><span style="color:#7edcda">channels:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  &#x27;input&#x27;:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    subscribe:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      x-scs-function-name:</span><span> </span><span style="color:#c0e2a3;font-weight:500">calculatePercentage</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      message:</span><span>
</span></span><span class=" pr-8"><span>        </span><span style="color:#c0e2a3;font-weight:500">$ref:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&#x27;#/components/messages/CovidTracking_SingleStateCurrentDataUpdate&#x27;</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">  &#x27;output&#x27;:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">    publish:</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      x-scs-function-name:</span><span> </span><span style="color:#c0e2a3;font-weight:500">calculatePercentage</span><span>
</span></span><span class=" pr-8"><span></span><span style="color:#7edcda">      message:</span><span>
</span></span><span class=" pr-8"><span>        </span><span style="color:#c0e2a3;font-weight:500">$ref:</span><span> </span><span style="color:#c0e2a3;font-weight:500">&#x27;#/components/messages/CovidTracking_SingleStateTestPercentagesUpdate&#x27;</span></span></code></pre></div></div></div></div><ul class=" my-4 ml-4 list-disc text-gray-700 font-normal font-sans antialiased"><li class=" my-3 text-gray-700 font-normal font-sans antialiased">The <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">x-scs-destination</code> specification extension can be specified on a <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">subscribe</code> operation, allowing you to override the default destination value which usually matches the channel. This is useful when you are using the Solace binder and you are following the Solace pattern of publishing to topics and consuming from queues. In this case the <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">x-scs-destination</code> value would be treated as the name of the queue which your microservice will consume from and the channel name in the AsyncAPI document will be added as a topic subscription to that queue.</li><li class=" my-3 text-gray-700 font-normal font-sans antialiased">The <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">x-scs-group</code> specification extension can also be specified on a <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">subscribe</code> operation, allowing for the addition of a <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">group</code> to the generated Spring Cloud Stream <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">binding</code>. This allows for the use of consumer groups and will end up in a <a href="https://dev.to/solacedevs/understanding-solace-endpoints-durable-vs-non-durable-53gd" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">durable queue</a> being created when using the Solace binder.</li></ul><h1 id="tips-for-using-the-code-generator-to-create-event-driven-microservices-using-spring-cloud-stream" class=" my-4 font-sans antialiased font-medium text-2xl">Tips For Using The Code Generator To Create Event-Driven Microservices Using Spring Cloud Stream</h1><p class=" my-4 text-gray-700 font-normal font-sans antialiased">Besides configuration options there are a few more things to keep in mind when using the generator to create event-driven microservices using Spring Cloud Stream.</p><ol class=" my-4 ml-4 list-decimal text-gray-700 font-normal font-sans antialiased"><li class=" my-3 text-gray-700 font-normal font-sans antialiased">Make sure generated POJOs have the Java types you would expect for generated variables! For example, if your JSON schema defines an attribute type as a <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">number</code> or <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">integer</code> those are being mapped to a <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">Double</code> or <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">Integer</code> in Java respectively. If you would like another type, such as a float or long, you’ll want to make that change. It is also important to make sure you pay close attention to data that represents dates and/or times as those will likely end up just being represented by a <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">String</code> by default.</li><li class=" my-3 text-gray-700 font-normal font-sans antialiased">Dynamic topics are not yet supported by the AsyncAPI SCSt Code Generator. We’ll be looking to enhance them both to support dynamic topics in the future but for now you’ll want to remove dynamic pieces of the topic from your channels in the AsyncAPI document and add them into the code afterwards.</li><li class=" my-3 text-gray-700 font-normal font-sans antialiased">When creating a Spring Cloud Stream microservice that does <em>not</em> contain a <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">java.util.function.Supplier</code> include a web server so the microservice continues running and listening for messages to process. This can be done by including the <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">-p actuator=true</code> parameter to include Spring Actuator functionality which itself requires a web server, and also provides some cool management and monitoring capabilities. Alternatively, you can just add the <code class=" px-1 py-0.5 bg-primary-700 text-white rounded font-mono text-sm">spring-boot-starter-web</code> starter to your pom after it’s been generated. Note this is not an issue with the AsyncAPI generator template, but just a bug with the Solace Spring Cloud Stream binder which will be relevant to people using the generator.</li></ol><p class=" my-4 text-gray-700 font-normal font-sans antialiased">I hope those tips are helpful and save you some troubleshooting time!</p><h1 id="conclusion" class=" my-4 font-sans antialiased font-medium text-2xl">Conclusion</h1><p class=" my-4 text-gray-700 font-normal font-sans antialiased">I hope this post was useful and you’re able to quickly dive in to generating your own event-driven microservices using Spring Cloud Stream and the AsyncAPI Code Generator after exploring the example described above.</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">You can get started right away and use the Solace PubSub+ Event Portal to generate your AsyncAPI document for FREE by signing up for a <a href="https://console.solace.cloud/login/new-account" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">new cloud account</a>!</p><p class=" my-4 text-gray-700 font-normal font-sans antialiased">If you have more questions or want to share your experience with the tools, you can let us know in the <a href="http://solace.community/" class="text-primary-600 font-medium hover:text-primary-500 font-sans antialiased">Solace Community Forum</a> or consider joining us in contributing directly to the AsyncAPI initiative.</p><div style="position:relative;padding-bottom:56.25%;width:100%;height:0"><iframe src="https://www.youtube.com/embed/QEDL6AqsaJc" frameBorder="0" allow="autoplay; encrypted-media" allowfullscreen="" style="position:absolute;top:0;left:0;width:100%;height:100%"></iframe></div></article></main></div><div class="bg-white mt-12"><div class="bg-primary-900 py-12"><div class="max-w-screen-xl block   px-4 sm:px-6 lg:px-8 mx-auto block   px-4 sm:px-6 lg:px-8"><div class="p-8"><h3 class="text-primary-200 text-lg font-bold">Subscribe to our newsletter to receive news about AsyncAPI.</h3><p class="text-gray-400 mt-2 text-sm">We respect your inbox. No spam, promise ✌️</p><form class="mt-4 md:flex" data-netlify="true"><input type="hidden" name="form-name" value="form 2"/><input type="hidden" name="type"/><input type="text" name="name" placeholder="Your name" class="form-input block w-full sm:text-sm sm:leading-5 md:mr-2 md:mt-0 md:flex-1" required=""/><input type="email" name="email" placeholder="Your email" class="form-input block w-full mt-2 sm:text-sm sm:leading-5 md:mr-2 md:mt-0 md:flex-1" required=""/><button type="submit" class="bg-primary-500 hover:bg-primary-400 text-white hover:text-white shadow-md hover:shadow-lg transition-all duration-500 ease-in-out rounded px-4 py-3 text-white w-full mt-2 md:mr-2 md:mt-0 md:flex-1"><span class="inline-block">Subscribe</span></button></form></div></div></div><div class="max-w-screen-xl mx-auto py-12 px-4 overflow-hidden sm:px-6 lg:px-8"><nav class="-mx-5 -my-2 flex flex-wrap justify-center"><div class="px-5 py-2"><a href="/about" class="text-base leading-6 text-gray-500 hover:text-gray-900">About</a></div><div class="px-5 py-2"><a href="/blog" class="text-base leading-6 text-gray-500 hover:text-gray-900">Blog</a></div><div class="px-5 py-2"><a href="https://asyncapi.threadless.com" target="_blank" class="text-base leading-6 text-gray-500 hover:text-gray-900">Shop</a></div><div class="px-5 py-2"><a href="/jobs" class="text-base leading-6 text-gray-500 hover:text-gray-900">Jobs</a></div><div class="px-5 py-2"><a href="mailto:press@asyncapi.io" class="text-base leading-6 text-gray-500 hover:text-gray-900">Press</a></div></nav><div class="mt-8 flex justify-center"><a href="https://twitter.com/AsyncAPISpec" target="_blank" class="text-gray-400 hover:text-blue-500"><span class="sr-only">Twitter</span><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"></path></svg></a><a href="https://github.com/asyncapi" target="_blank" class="ml-6 text-gray-400 hover:text-gray-500"><span class="sr-only">GitHub</span><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"></path></svg></a><a href="https://linkedin.com/company/asyncapi" target="_blank" class="ml-6 text-gray-400 hover:text-blue-500"><span class="sr-only">LinkedIn</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 22" enable-background="new 0 0 21 22" fill="currentColor" class="h-6 w-6"><path d="M5,3c0,1.1-0.7,2-2,2C1.8,5,1,4.1,1,3.1C1,2,1.8,1,3,1S5,1.9,5,3z M1,19h4V6H1V19z M14.6,6.2c-2.1,0-3.3,1.2-3.8,2h-0.1 l-0.2-1.7H6.9C6.9,7.6,7,8.9,7,10.4V19h4v-7.1c0-0.4,0-0.7,0.1-1c0.3-0.7,0.8-1.6,1.9-1.6c1.4,0,2,1.2,2,2.8V19h4v-7.4 C19,7.9,17.1,6.2,14.6,6.2z"></path></svg></a><a href="https://youtube.com/asyncapi" target="_blank" class="ml-6 text-gray-400 hover:text-red-600"><span class="sr-only">YouTube</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-6 w-6"><path d="M10,2.3C0.172,2.3,0,3.174,0,10s0.172,7.7,10,7.7s10-0.874,10-7.7S19.828,2.3,10,2.3z M13.205,10.334l-4.49,2.096 C8.322,12.612,8,12.408,8,11.974V8.026C8,7.593,8.322,7.388,8.715,7.57l4.49,2.096C13.598,9.85,13.598,10.15,13.205,10.334z"></path></svg></a></div><div class="mt-8"><p class="text-center text-base leading-6 text-gray-400">Made with <span class="font-mono text-pink-500">:love:</span> by the AsyncAPI Initiative.</p><p class="text-center text-base leading-6 text-gray-400 mt-4"><a href="https://netlify.com" target="_blank"><img src="https://www.netlify.com/img/global/badges/netlify-color-bg.svg" class="inline"/></a></p><p class="text-center text-base leading-6 text-gray-400 mt-4">Copyright © AsyncAPI Project a Series of LF Projects, LLC.</p><p class="text-center text-base leading-6 text-gray-400 mt-1">For web site terms of use, trademark policy and general project policies please see <a href="https://lfprojects.org" class="text-gray-700 underline" target="_blank">https://lfprojects.org</a></p></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/blog/asyncapi_codegen_scst","query":{},"buildId":"Tex625tf_lnUaoCgL3YGh","nextExport":true,"autoExport":true,"isFallback":false}</script><script nomodule="" src="/_next/static/runtime/polyfills-9a3984dd490beb07be5c.js"></script><script async="" data-next-page="/_app" src="/_next/static/Tex625tf_lnUaoCgL3YGh/pages/_app.js"></script><script async="" data-next-page="/blog/asyncapi_codegen_scst" src="/_next/static/Tex625tf_lnUaoCgL3YGh/pages/blog/asyncapi_codegen_scst.js"></script><script src="/_next/static/runtime/webpack-c212667a5f965e81e004.js" async=""></script><script src="/_next/static/chunks/framework.4dd1003cc9c949c7fcd3.js" async=""></script><script src="/_next/static/chunks/75fc9c18.3cfc8ccb85c1d7a11215.js" async=""></script><script src="/_next/static/chunks/ce56b752.ae226c74e10a6a4b10b8.js" async=""></script><script src="/_next/static/chunks/0557f841fc85a2834d7f888fce8afe60a4489f1d.c7c389ed4e650b7acdd9.js" async=""></script><script src="/_next/static/chunks/5d64a570782c3ceba4f83b61f6533a7ee91bc9f8.3990439058315e1f2df7.js" async=""></script><script src="/_next/static/chunks/be6d319af1fb18412639ef154d1e4d762d2a273e.4cb9699241b781436ae4.js" async=""></script><script src="/_next/static/chunks/4f5700c3a68d16ffc40162e6214bdf91e1aeaf40.af98a8a489a62e744487.js" async=""></script><script src="/_next/static/runtime/main-9425739e3a9a3f3edaa6.js" async=""></script><script src="/_next/static/Tex625tf_lnUaoCgL3YGh/_buildManifest.js" async=""></script><script src="/_next/static/Tex625tf_lnUaoCgL3YGh/_ssgManifest.js" async=""></script></body></html>